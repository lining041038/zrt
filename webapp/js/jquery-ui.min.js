if(!$["i18n"]){$.i18n=function(){return""};$.i18nCache={locale:"zh_CN"}}$.ajaxSetup({error:function(e){}});jQuery.extend({_getJSON:jQuery.getJSON,getJSON:function(){return $._getJSON.apply(this,$.stopcacheinner(arguments))},_get:jQuery.get,get:function(){return $._get.apply(this,$.stopcacheinner(arguments))},_post:jQuery.post,post:function(){return $._post.apply(this,$.stopcacheinner(arguments))},stopcacheinner:function(e){if(e[0].indexOf("?")!=-1){e[0]=e[0]+"&stopcache="+Math.random()}else{e[0]=e[0]+"?stopcache="+Math.random()}return e},browser:{msie:/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())!=null,version:/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())==null?8:/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())[2]},dialogeffect:{show:{effect:"drop",duration:200,direction:"up"},hide:{effect:"drop",duration:200,direction:"up"}}});jQuery.fn.extend({_serialize:jQuery.fn.serialize,serialize:function(){var e=this._serialize.apply(this,arguments);var t={};this.find(".fileupload").each(function(){if($(this).attr("name"))t[$(this).attr("name")]=$(this).val()});var i=$.param(t);if($.param(t)){e+="&"+i}return e},rebind:function(e,t){return this.unbind(e).bind(e,t)}});jQuery.extend({changeTheme:function(){$.getJSON(ctxPath+"/common/UserThemeController/getThemesToSelect.vot",function(e){var t="";for(var i=0;i<e.length;++i){t+="<input id='_themeid"+i+"' type='radio' name='theme' "+(e[i].selected?"checked":"")+" style='cursor:pointer' value='"+e[i].theme+"'/>						<label for='_themeid"+i+"' style='cursor:pointer' >"+e[i].themelabel+"</label>"}$("<form>"+t+"</form>").submitDialog({url:ctxPath+"/common/UserThemeController/saveSelectedTheme.vot",width:550,title:$.i18n("antelope.changetheme"),height:150,callback:function(){location=ctxPath+$.getIndexPagePos()}})})},changeLanguage:function(){$.getJSON(ctxPath+"/common/UserThemeController/getAllLocales.vot",function(e){var t="";for(var i=0;i<e.length;++i){t+="<input id='_localeid"+i+"' type='radio' name='locale' "+(e[i].selected?"checked":"")+" style='cursor:pointer' value='"+e[i].value+"'/>						<label for='_localeid"+i+"' style='cursor:pointer' >"+e[i].label+"</label>"}$("<form>"+t+"</form>").submitDialog({url:ctxPath+"/common/UserThemeController/saveSelectedLocale.vot",width:550,title:$.i18n("antelope.changelanguage"),height:150,callback:function(){location=ctxPath+$.getIndexPagePos()}})})},registeruser:function(){var e={};var t=null;e[$.i18n("antelope.register")]=function(){t.find("iframe")[0].contentWindow.registeruser(function(){t.dialog("destroy")})};e[$.i18n("antelope.cancel")]=function(){t.dialog("destroy")};t=$.dialogTopIframe({title:$.i18n("antelope.register"),width:400,height:300,url:ctx+"/system/register.jsp",buttons:e})}});jQuery.extend({validators:[{name:"required",validate:function(e){if(e.hasClass("fileupload")){if(e.fileupload("getFileInfos").length<=0)return $.i18n("antelope.validate.pleaseupload");return}if(!$.trim(e.val()))return $.i18n("antelope.validate.pleaseinput")}},{name:"required2",validate:function(e){if(e.hasClass("fileupload")){if(e.fileupload("getFileInfos").length<=0)return $.i18n("antelope.validate.pleaseupload");return}if(!$.trim(e.val()))return $.i18n("antelope.validate.pleaseinput")}},{name:"maxlength2",validate:function(e){var t=parseInt(e.attr("maxlength2"));if($.trim(e.val()).length>t)return $.i18n("antelope.validate.onlyinputprefix")+t+$.i18n("antelope.validate.onlyinputsuffix")}},{name:"minlength",validate:function(e){var t=parseInt(e.attr("minlength"));if($.trim(e.val()).length<t)return $.i18n("antelope.validate.onlymininputprefix")+t+$.i18n("antelope.validate.onlyinputsuffix")}},{name:"nbitint",validate:function(e){var t=parseInt(e.attr("nbitint"));if($.trim(e.val()).length==0)return;if($.trim(e.val()).length!=t||!/^\d*$/.test(e.val()))return $.i18n("antelope.validate.pleaseinputprefix")+t+$.i18n("antelope.validate.inputintvalsuffix")}},{name:"date",validate:function(e){try{$.datepicker.parseDate("yy-mm-dd",e.val())}catch(t){return $.i18n("antelope.validate.pleaseinputlikedate")}}},{name:"num",validate:function(e){if($.trim(e.val())){if(isNaN(e.val()))return $.i18n("antelope.validate.onlyinputnum")}}},{name:"int",validate:function(e){if($.trim(e.val())){if(!/^-?\d*$/.test(e.val()))return $.i18n("antelope.validate.onlyinputint")}}},{name:"max",validate:function(e){var t=parseFloat(e.attr("max"));if($.trim(e.val())){var i=parseFloat(e.val());if(!isNaN(i)&&i>t)return $.i18n("antelope.validate.pleaseinputsmallprefix")+t+$.i18n("antelope.validate.pleaseinputsuffix")}}},{name:"min",validate:function(e){var t=parseFloat(e.attr("min"));if($.trim(e.val())){var i=parseFloat(e.val());if(!isNaN(i)&&i<t)return $.i18n("antelope.validate.pleaseinputbigprefix")+t+$.i18n("antelope.validate.pleaseinputsuffix")}}},{name:"email",validate:function(e){var t=parseFloat(e.attr("min"));var i=/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,4}$/i;if($.trim(e.val())){var a=parseFloat(e.val());if(!i.test($.trim(e.val())))return $.i18n("antelope.validate.pleaseinputemail")}}},{name:"after",validate:function(e){var t=e.closest("form").find("[name="+e.attr("after")+"]");var i=t.val();if(e.val()&&i){var a=e.attr("label");var n=t.attr("label");if(e.val()<=i)return a+$.i18n("antelope.validate.mustbe")+n+$.i18n("antelope.validate.mustbesuffix")}}},{name:"notBefore",validate:function(e){var t=e.closest("form").find("[name="+e.attr("notBefore")+"]");var i=t.val();if(e.val()&&i){var a=e.attr("label");var n=t.attr("label");if(e.val()<i)return a+$.i18n("antelope.validate.mustnotbe")+n+$.i18n("antelope.validate.mustnotbesuffix")}}},{name:"price",validate:function(e){var t=parseFloat(e.attr("min"));var i=/^[0-9]+(\.[0-9]{1,2})?$/i;if($.trim(e.val())){if(!i.test($.trim(e.val())))return"请输入有效的价格，如3、 3.1、3.12！"}}}]});(function(e,t){e.widget("ui.ckeditor4",{options:{readonly:false},_elemid:null,_create:function(){var t=this;this._elemid=this.element.attr("id");var i=CKEDITOR.dom.element.get(this.element.attr("id"));var a=131;var n=515;if(a<this.element.height()){a=this.element.height()}if(n<this.element.width()){n=this.element.width()}this.element.wrap("<div style='width:"+n+"px;'/>");this.element.data("ckeditorheight",a);var o=e.i18nCache["locale"];if(o=="en_US")o="en";if(o=="zh_CN")o="zh-cn";CKEDITOR.replace(this.element.attr("id"),{height:a,autoUpdateElement:false,autoGrow_bottomSpace:1,autoGrow_onStartup:true,language:o,readOnly:t.options.readonly,toolbar:[{name:"allbtns",items:["Bold","Italic","Underline","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","Font","FontSize","TextColor","AfeDialog","Image"]}]});this.element.rebind("attrchange",function(){s.apply(this,arguments)});this.addUpdateTextarea();function s(t,i,a){var n=this;var o=arguments;var r=e(this).next().find(".cke_wysiwyg_frame")[0];if(r&&!e(r).is(":hidden")&&r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.body){var l=e(this).data("editorobj");if(i=="readonly"||i=="disabled"){if(a){e(this).next().find(".cke_top,.cke_bottom").hide()}else{e(this).next().find(".cke_top,.cke_bottom").show()}}if(i=="readonly"||i=="disabled"){try{l.setReadOnly(a)}catch(t){}}}else{setTimeout(function(){s.apply(n,o)},50)}}},refresh:function(){this._refreshInner()},_refreshInner:function(){var t=this;var i=this.element.next().find(".cke_wysiwyg_frame");if(i.length&&i[0].contentWindow&&i[0].contentWindow.document&&i[0].contentWindow.document.body){var a=CKEDITOR.dom.element.get(t.element.attr("id"));if(a.getEditor()){var n=a.getEditor();s(i,n,t.element.val())}}else{var o=arguments;setTimeout(function(){t._refreshInner.apply(t,o)},100)}function s(i,a,n){if(!e(i).is(":hidden")){a.setData(n);t.addUpdateTextarea()}else{setTimeout(function(){s(i,a,n)},300)}}},addUpdateTextarea:function(){var t=this;var i=e("#"+this.element.attr("id")).next().find(".cke_wysiwyg_frame");if(i.length&&i[0].contentWindow&&i[0].contentWindow.document&&i[0].contentWindow.document.body){e(i[0].contentWindow.document.body).data("textareaid",this.element.attr("id"));e(i[0].contentWindow.document.body).blur(function(){var t=e(this).data("textareaid");var i=CKEDITOR.dom.element.get(t);if(i.getEditor()){var a=i.getEditor();a.updateElement()}})}else{var a=arguments;setTimeout(function(){t.addUpdateTextarea.apply(t,a)},100)}},destroy:function(t){try{var i=CKEDITOR.dom.element.get(this.element.attr("id"));i.getEditor().destroy()}catch(a){}e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);jQuery.fn.extend({resetForm:function(e,t){var i=0;var a=":input:not(:button),.tinymce,.fileupload";this.find(a).removeClass("ui-state-error");t=t||"";var n=$("[name="+t+"sid]",this);if(n.length==0){this.prepend("<input name='"+t+"sid' type='hidden'/>");n=$("[name="+t+"sid]",this)}if(e){this.data("formdata",e);this.find(a).each(function(){var a=$(this).attr("name");if(i=="1"&&a){a=a.toLowerCase()}if(a&&!$.isPlainObject(e[a])){var n=e[a.replace(new RegExp("^"+t),"")];$(this).data("formdata",n);if(n!=null){if($(this).hasClass("date")||$(this).hasClass("typicalDate")){this.value=typicalDateFormatter(n)}else{if($(this).is(":radio")||$(this).is(":checkbox")){$(this).prop("checked",false);if(this.value==n){$(this).prop("checked",true);$(this).click();$(this).prop("checked",true)}}else{this.value=n==null||n=="null"?"":n;if($(this).is("select")){$(this).change()}}var o=$(this).closest(".dropdown");if(o.length){var s=o.find("li[value="+this.value+"]");if(s.length){o.find(".buttonlabel").text(s.text())}}}}else{if($(this).is(":radio")||$(this).is(":checkbox")){if($(this).attr("default"))$(this).prop("checked",true);else $(this).prop("checked",false)}else{this.value="";if($(this).attr("default"))this.value=$(this).attr("default");$(this).data("formdata","")}var o=$(this).closest(".dropdown");if(o.length){var r=o.find(".buttonlabel");r.text(r.attr("defaultbtnlabel"))}}if($(this).hasClass("fileupload")){$(this).fileupload("option","filegroupsid",n)}}})}else{var o=$.getNewsid();var s={};s[t+"sid"]=o;this.data("formdata",s);this.find(a).each(function(){if($(this).is(":radio")||$(this).is(":checkbox")){if($(this).attr("default"))$(this).prop("checked",true);else $(this).prop("checked",false)}else if($(this).is("select")&&$(this).attr("default")){$(this).val($(this).attr("default"))}else if($(this).attr("default")){this.value=$(this).attr("default")}else{this.value="";if($(this).hasClass("date")){if($(this).hasClass("today")){this.value=$.datepicker.formatDate("yy-mm-dd",new Date)}if($(this).hasClass("yearbegin")){this.value=$.datepicker.formatDate("yy-01-01",new Date)}if($(this).hasClass("yearend")){this.value=$.datepicker.formatDate("yy-12-31",new Date)}}$(this).data("formdata",this.value)}n.val(o).data(t+"sid",o);if($(this).hasClass("fileupload")){var e=$.getNewsid();$(this).val(e);$(this).fileupload("option","filegroupsid",e)}var i=$(this).closest(".dropdown");if(i.length){var a=i.find(".buttonlabel");a.text(a.attr("defaultbtnlabel"))}})}this.initTinyMce();this.initCkeditor();this.trigger("resetFormComplete");return this},wrapDataByClass:function(e){for(var t in e){var i=this.find("."+t);if(i.is(".date")){this.find("."+t).text(typicalDateFormatter(e[t]))}else{this.find("."+t).text(e[t])}}return this},validate:function(e,t){var i={isnoerror:true};var a=[];var n=this.find(":input,.fileupload");if(this.is(":input,.fileupload")){n=this}var o=[];this.find("iframe").each(function(){if(this.contentWindow.$&&this.contentWindow.nestedbyform){this.contentWindow.$(":input,.fileupload").each(function(){o.push(this)})}});n.each(function(){var t=revalidateformcell(this,e);if(!t.isnoerror)a.push(t);i.isnoerror=t.isnoerror&&i.isnoerror;i.errorscrope=i.errorscrope||t.errorscrope});$(o).each(function(){var t=revalidateformcell(this,e);if(!t.isnoerror)a.push(t);i.isnoerror=t.isnoerror&&i.isnoerror;i.errorscrope=i.errorscrope||t.errorscrope});if(i.errorscrope){if(t){return i.isnoerror}alert("请将("+i.errorscrope+")下的表单补充完整！");return i.isnoerror}if(useAlertToShowValidate&&a.length){var s="请您完善如下表单域后再操作：\n";for(var r=0;r<a.length;++r){s+=a[r].fieldlabel;if(r!=a.length-1)s+="、 \n"}alert(s)}return i.isnoerror},setCurrentState:function(e){e=e||"";this.data("currentState",e);$("[includeIn]",this).hide().each(function(){if($.inArray(e,$(this).attr("includeIn").split(","))!=-1){$(this).show()}});$("[excludeFrom]",this).show().each(function(){if($.inArray(e,$(this).attr("excludeFrom").split(","))!=-1){$(this).hide()}});$("[state]",this).each(function(){var i=$(this).attr("state").split(";");i=$.grep(i,function(e){return e!=null&&e!=""});var a=[];var n=[];for(var o=0;o<i.length;++o){i[o]=i[o].replace(/\s/gi,"");if(i[o].indexOf(".")==-1){var s=i[o].split(":")[1];if(s=="false")s=false;if(s=="true")s=true;if(i[o].charAt(0)=="$"){n[i[o].split(":")[0].substring(1)]=s}else{a[i[o].split(":")[0]]=s}}}var r=[];for(var o=0;o<i.length;o++){if(i[o]){var l=i[o].split(":")[0];var s=i[o].split(":")[1];if(s=="false")s=false;if(s=="true")s=true;var d=l.split(".")[0];if(r[d])continue;var u=l.split(".").length>1?l.split(".")[1]:"";if(e){if(u==e){if(d.charAt(0)=="$"){$(this).css(d.substring(1),s)}else{t(this,d,s)}r[d]=true}else{if(d.charAt(0)=="$"){if(n[d.substring(1)]!=null)$(this).css(d.substring(1),n[d.substring(1)])}else{t(this,d,a[d])}}}else{if(u)continue;if(d.charAt(0)=="$"){if(n[d.substring(1)]!=null)$(this).css(d.substring(1),n[d.substring(1)])}else{t(this,d,a[d])}r[d]=true}}}});function t(e,t,i){if(i!=null){if(t=="disabled"&&!$(e).is(":radio,:checkbox,.tinymce")){if(!i){if($(e).is(".date")){$(e).datepicker({changeYear:true,changeMonth:true,yearRange:"c-50:c+50"})}}else{if($(e).data("datepicker"))$(e).datepicker("destroy")}if(!i){if($(e).is(".datetime")){$(e).datetimepicker()}}else{if($(e).data("uiDatetimepicker"))$(e).datetimepicker("destroy")}var a=$(e).data("origreadonly");if(a==null){a=$(e).prop("readonly");$(e).data("origreadonly",a)}$(e).prop("readonly",a||i);if(i){if(!$(e).is(".noteditable")){$(e).filter(":text,:password").addClass("noteditable").blur();$(e).next(".requiredsource").addClass("requiredsource_trans")}}else{if($(e).is(".noteditable")){$(e).filter(":text,:password").removeClass("noteditable");$(e).next(".requiredsource").removeClass("requiredsource_trans")}}if($(e).is("select")){var n=$(e).prev(".disabledselect");if(n.length==0){n=$("<span class='disabledselect' style='display:none; display:inline-block;'/>");n.insertBefore(e)}if(!$.browser.msie){$(e).unbind("change.disabledselect");$(e).bind("change.disabledselect",function(){$(this).prev(".disabledselect").text($(this).find("option[selected=true]").text())})}else{$(e).unbind("propertychange.disabledselect");$(e).bind("propertychange.disabledselect",function(){if(event.propertyName!="value")return;$(this).prev(".disabledselect").text($(this).find("option[selected=true]").text())});$(e).unbind("change.disabledselect");$(e).bind("change.disabledselect",function(){$(this).prev(".disabledselect").text($(this).find("option[value="+$(this).val()+"]").text())})}var o=null;if(!$.browser.msie){$(e).find("option").each(function(){if($(this).prop("selected")){o=$(this).text();return false}});o=o||""}else{o=$(e).find("option[value="+$(e).val()+"]").text()}if(i){var s=$(e).width();if(s!=0)n.width($(e).width());n.text(o).css({marginRight:$(e).css("marginRight"),marginLeft:$(e).css("marginLeft")}).show();$(e).hide()}else{n.hide();$(e).show()}}if($(e).is(".dropdown")){var r=$(e).find("input:hidden");if(!$.browser.msie){r.unbind("change.disabledselect");r.bind("change.disabledselect",function(){$(this).closest(".dropdown").prev(".disabledselect").text($(this).closest(".dropdown").find("li[role=presentation][value="+this.value+"]").text())})}else{r.unbind("propertychange.disabledselect");r.bind("propertychange.disabledselect",function(){if(event.propertyName!="value")return;$(this).closest(".dropdown").prev(".disabledselect").text($(this).closest(".dropdown").find("li[role=presentation][value="+this.value+"]").text())})}var n=$(e).prev(".disabledselect");if(n.length==0){n=$("<span class='disabledselect' style='display:none; display:inline-block;'/>");n.insertBefore(e)}var o=null;if(!$.browser.msie){$(e).find("option").each(function(){if($(this).prop("selected")){o=$(this).text();return false}});o=o||""}else{o=$(e).find("li[role=presentation][value="+r.val()+"]").text()}if(i){var s=$(e).width();if(s!=0)n.width($(e).width());n.text(o).css({marginRight:$(e).css("marginRight"),marginLeft:$(e).css("marginLeft")}).show();$(e).hide()}else{n.hide();$(e).show()}}$(e).trigger("attrchange",[t,i])}else{$(e).prop(t,i).trigger("attrchange",[t,i])}}}return this},getCurrentState:function(){return this.data("currentState")||""},exportForm:function(e){var t={callback:$.noop};var i=$.extend(true,{},t,e);var a=this;i.callback();var n=this.clone();n.find(":input").filter(function(){return $(this).css("display")!="none"}).each(function(){var e=$(this);if(e.is("select")){e[0].outerHTML=e.find("option[selected=true]").html()}else if(e.is(":checkbox,:radio")){e.remove()}else{this.outerHTML=e.val()}});$.postIframe(ctxPath+"/components/export.jsp",{exphtml:n.html()})},initTinyMce:function(e){var t=this.filter(".tinymce, textarea");if(e)t=this.filter(".tinymce");t.add($(".tinymce",this)).each(function(){if($(this).next().hasClass("mceEditor")){$("iframe",$(this).next())[0].contentWindow.document.body.innerHTML=$(this).data("formdata")==null?"":$(this).data("formdata");$(this).val($(this).data("formdata"));if($(this).prop("disabled")){$("iframe",$(this).next())[0].contentWindow.document.body.contentEditable=false;$("iframe",$(this).next())[0].contentWindow.document.body.onselectstart=function(){return false}}else{$("iframe",$(this).next())[0].contentWindow.document.body.contentEditable=true;$("iframe",$(this).next())[0].contentWindow.document.body.onselectstart=function(){return true}}}else{if(!$(this).data("isinitingmce")){var e="";if($(this).is(".img"))e="image,";$(this).tinymce({script_url:ctxPath+"/js/tiny_mce/tiny_mce.js",theme:"advanced",theme_advanced_buttons1:"cut,copy,paste,pastetext,pasteword,bold,italic,pasteword,underline,|,"+e+"justifyleft,justifycenter,justifyright,justifyfull,fontselect,fontsizeselect,forecolor",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left"});$(this).data("isinitingmce",true)}var t=this;setTimeout(function(){$(t).initTinyMce()},100)}$(this).unbind("attrchange").bind("attrchange",function(){$(this).initTinyMce()})});$(".tinymce",this).parent().find("a").attr("tabIndex",-1)},initCkeditor:function(e){var t=this.filter(".ckeditor4, textarea");if(e){t=this.filter(".ckeditor4");if(window["CKEDITOR"]){CKEDITOR.on("instanceReady",function(e){$("#"+e.editor.name).data("editorobj",e.editor)})}}t.add($(".ckeditor4",this)).each(function(){var e=$(this).data("ckeditorready");if(e){$(this).ckeditor4("refresh")}else{$(this).ckeditor4();$(this).data("ckeditorready",true)}})},initWidgets:function(e){if(/moduleid=.*/.exec(location.href)){var t=(/moduleid=.*/.exec(location.href)+"").split("=")[1];$(".moduletitle").load(ctxPath+"/common/SystemParamsController/getModuleTitleById.vot?moduleid="+t)}$("input:text",this).addClass("textcss");if(e){this.on("mouseenter","input",function(){var e=$(this);var t=e.attr("class");var i="";var a="";if(t&&t.indexOf(" ")==-1){i=t+"_hover";a=t+"_focus"}else if(t){i=t.split(" ")[0]+"_hover";a=t.split(" ")[0]+"_focus"}if(i)e.addClass(i)}).on("mouseleave","input",function(){var e=$(this);var t=e.attr("class");var i="";var a="";if(t&&t.indexOf(" ")==-1){i=t+"_hover";a=t+"_focus"}else if(t){i=t.split(" ")[0]+"_hover";a=t.split(" ")[0]+"_focus"}if(i)e.removeClass(i)}).on("mousedown","input",function(){var e=$(this);var t=e.attr("class");var i="";var a="";if(t&&t.indexOf(" ")==-1){i=t+"_hover";a=t+"_focus"}else if(t){i=t.split(" ")[0]+"_hover";a=t.split(" ")[0]+"_focus"}if(a)e.addClass(a)}).on("mouseup","input",function(){var e=$(this);var t=e.attr("class");var i="";var a="";if(t&&t.indexOf(" ")==-1){i=t+"_hover";a=t+"_focus"}else if(t){i=t.split(" ")[0]+"_hover";a=t.split(" ")[0]+"_focus"}if(a)e.removeClass(a)})}$(".tabs",this).each(function(){var e=$(this);tabnodes=$.makeArray(e.find("a[href^=#]"));var t=$.inArray(e.find("a[selected],a[selected2]")[0],tabnodes);if(t==-1)t=0;e.tabs({load:function(e,t){$(t.panel).initWidgets()},cache:true,ajaxOptions:{async:false},selected:t,active:t})});if($(".date",this).datepicker){$(".date",this).datepicker({changeYear:true,changeMonth:true,yearRange:"c-50:c+50"}).each(function(){if($(this).hasClass("today")){this.value=$.datepicker.formatDate("yy-mm-dd",new Date)}if($(this).hasClass("yearbegin")){this.value=$.datepicker.formatDate("yy-01-01",new Date)}if($(this).hasClass("yearend")){this.value=$.datepicker.formatDate("yy-12-31",new Date)}}).attr("date","true")}$(".datetime",this).datetimepicker();$(".button",this).each(function(){var e=$(this).attr("class").split(" ");var t=false;for(var i=0;i<e.length;i++){var a=$.trim(e[i]);if(a.indexOf("ui-icon-")!=-1){$(this).button({icons:{primary:a}});t=true;break}if(!t){$(this).button()}}});$(".dropdown",this).each(function(){$(this).find("[role=presentation]").click(function(){$(this).closest(".dropdown").find(".buttonlabel").text($(this).text());$(this).closest(".dropdown").find("input:hidden").val($(this).attr("value"))})});$(".m_head",this).unbind("click").click(function(){$("."+this.id).toggle();$(this).toggleClass("m_head_close")});$(".ui-layout").each(function(){var e=this;setTimeout(function(){$(e).layout({fxName:"none"})},200)});$("textarea[maxlength]",this).each(function(){if($(this).attr("textarea_maxlength_inited"))return;$(this).parent().append("<div></div>");$(this).attr("textarea_maxlength_inited",true)});$("textarea[maxlength]~div").css({position:"absolute",fontSize:"9pt",color:"#4586b5",width:"80px",textAlign:"right",display:"none"});$("textarea[maxlength]").bind("propertychange",function(){if(event.propertyName=="value"&&$.trim(this.value)){var e=$(this).data("oldvalforvalidate");if(e==null||e!=this.value){$(this).data("oldvalforvalidate",this.value);$(this).showWordCount()}}});$("textarea[maxlength]").focus(function(){$(this).showWordCount();$(this).parent().find("div").fadeIn("slow")});$("textarea[maxlength]").blur(function(){$(this).parent().find("div").fadeOut("slow")});$("input[maxlength]").bind("keydown",function(){var e=$(this);if($.trim(this.value)){i(this)}});function i(e){var t=$(e);var i=t.attr("maxlength");var a=t.val().length;if(i===a){t.addClass("ui-state-error").attr("title","已经达到最大字数"+i)}else{t.removeClass("ui-state-error").attr("title","")}}this.find(":input,.fileupload").andSelf().each(function(){var e=$(this);e.removeClass("ui-state-error");if(e.attr("required2")!="true"&&e.attr("required2")!=true&&e.prop("required")!="true"&&e.prop("required")!=true){e.removeAttr("requiredwidgetinited");while(e.next(".requiredsource").length)e.next(".requiredsource").remove()}else{if(e.attr("requiredwidgetinited"))return;e.after("<span class='requiredsource'/>");e.attr("requiredwidgetinited",true)}if(e.attr("validatebinded"))return;e.bind("blur.validate",function(){revalidateformcell(this)});if((e.is("input:text")||e.is(":password"))&&$.browser.msie){if(e.is(":password")){$(this).change(function(){var e=$(this).data("oldvalforvalidate");if(e==null||e!=this.value){$(this).data("oldvalforvalidate",this.value);revalidateformcell(this)}})}else{this.onpropertychange=function(){if(event.propertyName=="value"&&$.trim(this.value)){var e=$(this).data("oldvalforvalidate");if(e==null||e!=this.value){$(this).data("oldvalforvalidate",this.value);revalidateformcell(this)}}}}}else{e.bind("propertychange.validate",function(){if(event.propertyName=="value"&&$.trim(this.value)){var e=$(this).data("oldvalforvalidate");if(e==null||e!=this.value){$(this).data("oldvalforvalidate",this.value);revalidateformcell(this)}}})}e.attr("validatebinded",true)});this.initTinyMce(true);this.initCkeditor(true);$("input.ztree",this).each(function(){var e=$(this);if(e.attr("ztreeselectinited"))return;e.attr("ztreeselectinited",true).attr("readonly",true);var t=$('<ul class="tree" style="width:265px; height:245px; background-color:white; position:absolute; overflow-y:auto; overflow-x:auto; border:1px solid black; display: none;"></ul>');e.after(t);t.click(function(e){e.stopPropagation()});e.click(function(i){var a=e.position();t.css({left:a.left,top:a.top+e.height()});if(t.data("uiTree"))t.tree("destroy");t.tree({click:function(i,a,n){if(e.attr("validateFunction")){if(window[e.attr("validateFunction")](n)===false){return}}if(e.attr("showfullpath")){var o=[];var s=n;while(s){o.unshift(s.name);s=s.parentNode}e.val(o.join(" > "))}else{e.val(n.name)}if(e.attr("sidfieldname")){e.closest("form").find("[name="+e.attr("sidfieldname")+"]").val(n.sid)}t.hide();e.change()},asyncUrl:ctx+e.attr("dataProvider")});t.show();i.stopPropagation()});hideWidgetPartsUtilFunction_(t,$.Guid.New().substring(0,8))});$("textarea.heightadapt",this).andSelf().filter("textarea.heightadapt").each(function(){var e=$(this);if(e.attr("heightadaptwidgetinited"))return;var t=e.data("leastheight");if(!t){t=Math.max(e.attr("scrollHeight"),e.height());e.data("leastheight",t)}e.keydown(function(e){var t=$(this).data("leastheight");var i=0;for(var a=0;a<this.value.length;a++){if(this.value.charAt(a)=="\n"){i++}}var n=$(this).attr("scrollHeight");if(e.keyCode==13){n+=7}if(n<=t)n=t;else n+=2;$(this).height(n)});e.bind("propertychange.heightadapt",function(){if(event.propertyName=="value"){var e=$(this).data("oldvalforheightadapt");if(e==null||e!=this.value){$(this).data("oldvalforheightadapt",this.value);$(this).keyup()}}});e.keyup(function(e){var t=this;var i=$(this).data("leastheight");var a=0;var n=$(this).attr("scrollHeight");if(n==0){setTimeout(function(){$(t).keyup()},20);return}if(n<i)n=i;if(n<=i)n=i;else n+=2;$(this).height(n)}).keyup();e.attr("heightadaptwidgetinited",true)});$("select[dataProvider]",this).andSelf().filter("select[dataProvider]").each(function(){var e=$(this);var t=$(this).attr("dataProvider");if(!/.vot/.test(t)){$.ajax({url:ctxPath+"/getsystemenumdatas.vot?xmlname="+t,async:false,dataType:"json",success:function(t){var i="";$(t).each(function(){if(e.attr("default")==this.value||this.selected)i+="<option enum='true' value='"+this.value+"' selected>"+this.label+"</option>";else i+="<option enum='true' value='"+this.value+"'>"+this.label+"</option>"});e.find("[enum]").remove().end().append(i)}})}else{$.ajax({url:ctxPath+t,async:false,dataType:"json",success:function(t){var i="";$(t).each(function(){if(e.attr("default")==this.value||this.selected)i+="<option enum='true' value='"+this.value+"' selected>"+this.label+"</option>";else i+="<option enum='true' value='"+this.value+"'>"+this.label+"</option>"});e.find("[enum]").remove().end().append(i)}})}});if(e&&typeof creationComplete!="undefined"&&$.isFunction(creationComplete)){creationComplete()}return this},submitDialog:function(e){var t={url:null,callback:$.noop,width:$(window).width()-50,height:$(window).height()-50,title:"",show:$.dialogeffect.show,hide:$.dialogeffect.hide,state:null,resizable:true,close:$.noop,dialogTopIframeURL:null,dialogTopLoadedComplete:$.noop,isinline:false,submitLabel:$.i18n("antelope.ok"),successTip:$.i18n("antelope.savesuccess"),validateFunction:$.noop,tempSaveLabel:"暂存",autoTempSaveEnabled:false,showTempSave:false};var i=$.extend(true,{},t,e);if(i.width==null){if(i.dialogTopIframeURL)i.width=top.$(top).width()-50;else i.width=$(window).width()-50}if(i.height==null){if(i.dialogTopIframeURL)i.height=top.$(top).height()-50;else i.height=$(window).height()-50}var a=this;var n=null;var o=null;var s=null;var r=null;function l(e){var t=a.parent().find(".autosave2");if(t.length==0){t=$("<div class='autosave2'></div>");a.parent().append(t)}t.text(e);if(n){t.fadeIn("fast");setTimeout(function(){t.fadeOut()},3e3)}}function d(e,t){return function(n){if($(n.target).data("beginsubmit")){return}$(n.target).data("beginsubmit",true);var s=a;if(i.dialogTopIframeURL){var r=o.find("iframe")[0].contentWindow;s=r.$("body").find("form")}if(i.validateFunction()!=false&&s.validate(e)&&(e||confirm($.i18n("antelope.confirmok")))){if(!t){$(n.target)._setButtonCommitting(true)}var d=encodeURI(s.serialize());if(d)d+="&tempsave="+e;else d="tempsave="+e;$.post(i.url,d,function(e){if(e){if(e.length<400){alert(e);$(n.target)._setButtonCommitting(false);$(n.target).data("beginsubmit",false)}else{return}return}if(t){l("自动暂存成功！")}else{alert(i.successTip);$(n.target)._setButtonCommitting(false);c();if(i.dialogTopIframeURL){if(o.data("uiDialog"))o.dialog("close")}else{if(a.data("uiDialog"))a.dialog("close")}i.callback.call(s)}$(n.target).data("beginsubmit",false);if(i.isinline){p()}})}else{if(t){l("自动暂存失败，原因为：表单验证失败！")}$(n.target).data("beginsubmit",false)}}}var u=[{text:i.submitLabel,click:d(0,false)},{text:$.i18n("antelope.cancel"),click:function(){if(i.dialogTopIframeURL){o.dialog("close");i.close();return}if(i.autoTempSaveEnabled&&i.showTempSave){c();i.callback.call(a)}if(i.isinline){p()}else{if(a.data("uiDialog"))a.dialog("close");i.close()}}}];function c(){clearInterval(n);n=null;a.parent().find(".autosave2").remove()}if(i.showTempSave){u.unshift({text:i.tempSaveLabel,click:d(1,false)})}function p(){$("body").viewNavigator("popView");r.remove();a.unwrap().hide()}if(i.dialogTopIframeURL){o=$.dialogTopIframe({url:i.dialogTopIframeURL,width:i.width,height:i.height,title:i.title,buttons:u,loadComplete:function(e){var t=e.$("body").find("form");i.dialogTopLoadedComplete.call(t)}})}else if(i.isinline){s=a.wrap("<div></div>").parent();if(window["componentsv2"]){r=$("<div style='padding:7px; background:white;'></div>")}else{r=$("<div style='padding:7px; background:white; border-bottom:1px dotted;'></div>")}s.prepend(r);a.show();$("body").viewNavigator("pushView",s);if(window["componentsv2"]){$("<button class='btn btn-default'><span class='glyphicon glyphicon-chevron-left'></span></button>").click(p).appendTo(r).css("margin-right",6)}else{$("<button class='button'>&lt; 返回列表</button>").click(p).appendTo(r).button()}if(window["componentsv2"]){var h=$("<div class='btn-group'/>");for(var f=0;f<u.length;++f){var m=u[f];$("<label class='btn btn-default'>"+m.text+"</label>").click(m.click).appendTo(h)}h.appendTo(r)}else{for(var f=0;f<u.length;++f){var m=u[f];if(window["componentsv2"]){$("<button class='btn btn-sm btn-default'>"+m.text+"</button>").click(m.click).appendTo(r).css("margin-left",6)}else{$("<button class='button'>"+m.text+"</button>").click(m.click).appendTo(r).button().css("margin-left",6)}}}}else{this.dialog({buttons:u,width:i.width,height:i.height,modal:true,title:i.title,resizable:i.resizable,show:i.show,hide:i.hide,close:function(){if(i.autoTempSaveEnabled&&i.showTempSave){c();i.callback.call(a)}i.close()}});$(document).unbind("focusin")}if(i.state){this.setCurrentState(i.state)}if(i.autoTempSaveEnabled&&i.showTempSave){var g=d(1,true);n=setInterval(function(){g({target:a.parent().find("span:contains('"+i.tempSaveLabel+"')")[0]})},tempsaveinterval)}this.submit(function(){$(this).parent().find(".ui-dialog-buttonpane button:first").click();return false});$(".fileupload",this).each(function(){var e=$(this);if(e.data("uiFileupload")){var t=e.fileupload("option","filegroupsid");var i=e.fileupload("option","readonly");var a=e.fileupload("option","autosave");e.fileupload("destroy");e.fileupload({filegroupsid:t,readonly:i,autosave:a})}else{if(e.data("uiFileupload"))e.fileupload("destroy");e.fileupload({filegroupsid:e.prop("value"),readonly:!!e.prop("readonly2"),autosave:!!e.prop("autosave")})}});return this},viewDialog:function(e){var t={dataProvider:null,width:$(window).width()-50,height:$(window).height()-50,dialogTopIframeURL:null,dialogTopLoadedComplete:$.noop,isinline:false,state:null,callback:$.noop,title:""};var i=$.extend(true,{},t,e);if(i.width==null){if(i.dialogTopIframeURL)i.width=top.$(top).width()-50;else i.width=$(window).width()-50}if(i.height==null){if(i.dialogTopIframeURL)i.height=top.$(top).height()-50;else i.height=$(window).height()-50}var a=this;var n=null;var o=null;
var s=null;if(i.dataProvider){this.resetForm(i.dataProvider)}function r(){$("body").viewNavigator("popView");s.remove();a.unwrap().hide()}if(i.dialogTopIframeURL){n=$.dialogTopIframe({url:i.dialogTopIframeURL,width:i.width,height:i.height,title:i.title,buttons:[{text:$.i18n("antelope.close"),click:function(){if(i.dialogTopIframeURL){n.dialog("destroy");return}i.callback();a.dialog("destroy")}}],loadComplete:function(){var e=n.find("iframe")[0].contentWindow;var t=e.$("body").find("form");i.dialogTopLoadedComplete.call(t)}})}else if(i.isinline){o=a.wrap("<div></div>").parent();if(window["componentsv2"]){s=$("<div style='padding:7px; background:white;'></div>")}else{s=$("<div style='padding:7px; background:white; border-bottom:1px dotted;'></div>")}o.prepend(s);a.show();$("body").viewNavigator("pushView",o);if(window["componentsv2"]){$("<button class='btn btn-default'><span class='glyphicon glyphicon-chevron-left'></span></button>").click(r).appendTo(s).css("margin-right",6)}else{$("<button class='button'>&lt; 返回列表</button>").click(r).appendTo(s).button()}}else{this.dialog({buttons:[{text:$.i18n("antelope.close"),click:function(){i.callback();a.dialog("destroy")}}],width:i.width,height:i.height,modal:true,title:i.title})}if(i.state){this.setCurrentState(i.state)}},submitForm:function(e){var t={url:null,confirmText:$.i18n("antelope.form.confirmoperat"),callback:$.noop,button:null,successTip:$.i18n("antelope.savesuccess")};var i=$.extend(true,{},t,e);var a=this;i.data=encodeURI(a.serialize());var n=i.callback;i.callback=function(){a.find(".fileupload").each(function(){var e=$(this).fileupload("option","filegroupsid");var t=$(this).fileupload("option","_uploadtimeid");$.post(ctxPath+"/upload/UploadController/setPermanent.vot?ispermanent=1&filegroupsid="+e+"&uploadtimeid="+t)});alert(i.successTip);n.call(a)};if(a.validate()){$.commonSubmit(i)}},_setButtonCommitting:function(e){if(e){this.data("tbuttonval",this.val());this.prop("disabled",true);var t=$.i18n("antelope.form.nowprefix")+this.val()+$.i18n("antelope.form.nowsuffix");if(/^<span.*/i.test(this.val())){t=$("<span>"+this.val()+"</span>").text();t=$("<span>"+this.val()+"</span>").find(".ui-button-text").text($.i18n("antelope.form.nowprefix")+t+$.i18n("antelope.form.nowsuffix")).parent().html()}this.val(t)}else{this.prop("disabled",false);this.val(this.data("tbuttonval"))}},unitTree:function(e){var t={itemClick:$.noop,itemDoubleClick:$.noop};var i=$.extend(true,{},t,e);var a={expandSpeed:"",showLine:true,checkable:false,async:true,asyncUrl:ctxPath+"/common/UserRoleOrgController/getAsyncOrgnizationTreedata.vot",asyncParam:["sid"],callback:{click:i.itemClick,dblclick:i.itemDoubleClick}};return this.zTree(a)}});(function(e,t){e.widget("ui.selectUsers",{options:{idinput:null,nameinput:null,button:null,selectionMode:"single",isUsername:true,filterrole:""},_create:function(){var t=this;this.options.button.click(function(){var i=[];if(t.options.idinput.val()){if(t.options.selectionMode=="single"){i.push(t.options.idinput.val())}else{i=e.parseJSON(t.options.idinput.val())}}e.selectUsers({callback:function(i){if(i.length){if(t.options.isUsername){if(t.options.selectionMode=="single"){t.options.idinput.val(i[0].username);t.options.nameinput.val(i[0].name)}else{var a=[];var n=[];e(i).each(function(){a.push(this.username);n.push(this.name)});t.options.idinput.val(JSON.stringify(a));t.options.nameinput.val(n)}}else{if(t.options.selectionMode=="single"){t.options.idinput.val(i[0].sid);t.options.nameinput.val(i[0].name)}else{var a=[];var n=[];e(i).each(function(){a.push(this.sid);n.push(this.name)});t.options.idinput.val(JSON.stringify(a));t.options.nameinput.val(n)}}}},selectedusers:i,isUsername:t.options.isUsername,issingle:t.options.selectionMode=="single",filterrole:t.options.filterrole})})}})})(jQuery);(function(e,t){e.widget("ui.selectUserByRolesid",{options:{idinput:null,nameinput:null,button:null,rolesid:null,isUsername:true,unitsid:""},_create:function(){var t=this;this.options.button.click(function(){e.selectUserByRolesid({callback:function(e){if(t.options.isUsername){t.options.idinput.val(e.username)}else{t.options.idinput.val(e.sid)}t.options.nameinput.val(e.name)},isUsername:t.options.isUsername,rolesid:t.options.rolesid,unitsid:t.options.unitsid})})}})})(jQuery);(function($,undefined){$.widget("ui.timepicker",{options:{currentDate:new Date,secondEditable:true,change:jQuery.noop},_selectedInput:null,_create:function(){var thisObj=this;var hours=this.options.currentDate.getHours();var minutes=this.options.currentDate.getMinutes();var secondes=this.options.currentDate.getSeconds();if(hours<=9)hours="0"+hours;if(minutes<=9)minutes="0"+minutes;if(secondes<=9)secondes="0"+secondes;var disabledstr="";if(!this.options.secondEditable){disabledstr=" disabled='disabled' "}this.element.append('<div class="timepicker">				<input maxlength="2" class="timppicker_hour" value="'+hours+'">:<input maxlength="2" class="timppicker_min" value="'+minutes+'">:<input '+disabledstr+' maxlength="2" class="timppicker_sec" value="'+secondes+'">				<div class="pickerbuttonout">					<div class="timeup"></div>					<div class="timedown"></div>				</div>			</div>');this.element.find(".timppicker_hour,.timppicker_min,.timppicker_sec").focus(function(){thisObj._selectedInput=this;$(this).select()}).keydown(function(e){if((e.keyCode<48||e.keyCode>57&&e.keyCode<96||e.keyCode>105)&&e.keyCode!=8)return false}).blur(function(){if(thisObj._selectedInput){var theval=eval(thisObj._selectedInput.value);tidyTimeCell(theval)}});this.element.find(".timeup").click(function(){if(thisObj._selectedInput){var theval=eval(thisObj._selectedInput.value)+1;tidyTimeCell(theval)}});function tidyTimeCell(e){if(!e)e=0;var t=23;if($(thisObj._selectedInput).is(".timppicker_min,.timppicker_sec")){t=59}if(e>t)e=0;if(e<0)e=t;if(e<=9)e="0"+e;thisObj._selectedInput.value=e;thisObj.options.change()}this.element.find(".timedown").click(function(){if(thisObj._selectedInput){var theval=eval(thisObj._selectedInput.value)-1;tidyTimeCell(theval)}});thisObj.options.change()},getTimeStr:function(){return this.element.find(".timppicker_hour").val()+":"+this.element.find(".timppicker_min").val()+":"+this.element.find(".timppicker_sec").val()},setTimeStr:function(e){e=e.split(":");this.element.find(".timppicker_hour").val(e[0]);this.element.find(".timppicker_min").val(e[1]);this.element.find(".timppicker_sec").val(e[2])}})})(jQuery);(function(e,t){e.widget("ui.datetimepicker",{options:{currentDate:new Date,secondEditable:true},_pickerdiv:null,_pos:null,_okbtn:null,_cancelbtn:null,_datediv:null,_timediv:null,_create:function(){var t=e("<div style='position:absolute; display:none; border:1px solid gray; padding:2px; z-index:10000000'/>");this._datediv=e("<div/>").datepicker({changeYear:true,changeMonth:true,yearRange:"c-50:c+50"});this._timediv=e("<div style='margin-top:3px; float:left;'/>").timepicker({secondEditable:this.options.secondEditable});this._okbtn=e("<input type='button' value='"+e.i18n("antelope.ok")+"' class='smallbutton' style=' float:left; margin-top:3px;margin-left:2px;'/>");this._cancelbtn=e("<input type='button' value='"+e.i18n("antelope.cancel")+"' class='smallbutton' style=' float:left;margin-top:3px; margin-left:2px;'/>");this._okbtn.click(function(){i.element.val(e.datepicker.formatDate("yy-mm-dd",i._datediv.datepicker("getDate"))+" "+i._timediv.timepicker("getTimeStr"));i._pickerdiv.hide()});this._cancelbtn.click(function(){i._pickerdiv.hide()});t.append(this._datediv).append(this._timediv).append(this._okbtn).append(this._cancelbtn);this._pickerdiv=t;this._pickerdiv.mousedown(function(e){e.stopPropagation()});e("body").append(this._pickerdiv);var i=this;this.element.rebind("click.timpicker",function(){var t=i.element.offset();i._pickerdiv.css("left",t.left+"px").css("top",t.top+i.element.height()+3+"px");if(i.element.val()){i._datediv.datepicker("setDate",e.datepicker.parseDate("yy-mm-dd",i.element.val().substring(0,10)));i._timediv.timepicker("setTimeStr",i.element.val().substring(11))}i._pickerdiv.show()});this.element.attr("readonly",true);e(document).mousedown(function(){i._pickerdiv.hide()})},destroy:function(){this.element.unbind("click.timpicker");e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);var chartCommonOptions={title:"",itemClick:"",chartItemClickParamFields:[],displayName:"",dataProvider:null,field:"value",labelField:"label",categoryTitle:"",type:"columnChart",columnChartType:null,fillColor:null,series:null};(function(e,t){e.widget("ui.fusionchart",{options:e.extend(true,{},chartCommonOptions,{}),_chart:null,_chartTypeSwfMap:{columnChart:{stacked:"StackedColumn3D.swf",clustered:"MSColumn3D.swf",single:"Column3D.swf"},lineChart:"MSLine.swf",pieChart:"Pie3D.swf",barChart:"MSBar3D.swf"},_chartId:null,_basicChartJson:{chart:{exportEnabled:1,exportAtClient:0,exportAction:"save",exportHandler:ctx+"/JSP/ExportExample/FCExporter",palette:"2",subcaption:"",showvalues:1,divlinedecimalprecision:"1",limitsdecimalprecision:"1",numberprefix:"",formatnumberscale:"0",legendIconScale:1,animation:0},styles:[{definition:[{style:[{name:"myLegendFont",type:"font",size:"12",bold:"1"}]}],application:[{apply:[{toobject:"Legend",styles:"myLegendFont"},{toobject:"DataLabels",styles:"myLegendFont"},{toobject:"ToolTip",styles:"myLegendFont"}]}]}]},_create:function(){var t=this;if(t.options.dataProvider==null&&(this.options.series==null||this.options.series.length==0))return;this._chartId="fc"+e.getNewsid();this._chart=new FusionCharts(ctx+"/controls/flash/fusionchart/"+this._getChartTypeSwf(this.options.type),this._chartId,"100%","100%","0","1");this._chart.setJSONData(this._createChartJson());this._chart.render(this.element[0])},_getChartTypeSwf:function(t){var i=this._chartTypeSwfMap[t];if(e.isPlainObject(i)){return i[this.options.columnChartType]}else{return i}},_createChartJson:function(){var e=this;var t=null;if(e.options.series==null||e.options.series.length==0){var i=this._getLabelValuesByOneSeries(e.options);var a=[];for(var n=0;n<e.options.dataProvider.length;++n){var o={label:e.options.dataProvider[n][this.options.labelField],value:e.options.dataProvider[n][this.options.field]};if(e.options.labelEnum){o.label=typicalEnumFormatter(o.label,e.options.labelEnum)}if(e.options.itemClick){o.link="JavaScript:"+e.options.itemClick+"("+JSON.stringify(this._filteredItemClickParam(e.options.dataProvider[n]))+");"}a.push(o)}t=this._createChartJsonInner({labels:i.labels,valueseries:[{seriesname:e.options.displayName,data:i.values}],data:a})}else{if(this.options.type=="pieChart"){alert("pieChart不支持多序列！");return}var s={labels:[]};var r=[];var l={};for(var n=0;n<e.options.series.length;++n){var i=this._getLabelValuesByOneSeries(e.options.series[n]);for(var d=0;d<i.labels.length;++d){if(l[i.labels[d].label])continue;s.labels.push(i.labels[d]);l[i.labels[d].label]=true}r.push({seriesname:e.options.series[n].displayName,data:i.values})}t=this._createChartJsonInner({labels:s.labels,valueseries:r})}return t},_filteredItemClickParam:function(e){var t=this;var i={};for(var a=0;a<t.options.chartItemClickParamFields.length;++a){i[t.options.chartItemClickParamFields[a]]=e[t.options.chartItemClickParamFields[a]]}return i},_createChartJsonInner:function(t){var i=this;return e.extend(true,{},i._basicChartJson,{chart:{caption:i.options.title,xaxisname:i.options.categoryTitle},categories:[{category:t.labels}],dataset:t.valueseries,data:t.data})},_getLabelValuesByOneSeries:function(e){var t=this;var i={labels:[],values:[],displayName:"",labelEnum:e.labelEnum};for(var a=0;a<e.dataProvider.length;++a){i.labels[a]={label:e.dataProvider[a][this.options.labelField]};if(i.labelEnum){i.labels[a].label=typicalEnumFormatter(i.labels[a].label,i.labelEnum)}i.values[a]={value:e.dataProvider[a][e.field]};i.displayName=e.displayName;if(t.options.itemClick){for(var n in e.dataProvider[a]){}i.values[a].link="JavaScript:"+t.options.itemClick+"("+JSON.stringify(this._filteredItemClickParam(e.dataProvider[a]))+");"}}return i},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments);var a=this;if(t=="dataProvider"||t=="series"){this._chart.setJSONData(this._createChartJson())}},showImage:function(t,i,a){var n=getChartFromId(this._chartId);if(n.hasRendered())n.exportChart({exportFormat:"png",exportFileName:"fc"+e.getNewsid(),exportCallback:t})},destroy:function(){e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(e,t){e.widget("ui.flashchart",{options:e.extend(true,{},chartCommonOptions,{charts:null,tileWidth:150,tileHeight:160,blowBgColorField:null,blowLabelFontSize:12,chartsTileWidth:300,chartsTileHeight:300,valueAxisMinimum:null,valueAxisMaximum:null,titleFontSize:14,titleVisible:true,legendVisible:true,axisVisible:true,labelEnum:null,interval:null,markerHeight:15,markerWidth:10,lineColor:16711680,axisLabelPadding:0,fillColor:null,numToVertCategoryLabel:0,showChartSelect:true,style:"gs",valueTitle:""}),_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments);this._labelEnumTidy();if(t=="dataProvider"){this.element.commonChartReload("commonChartReloadData",this.options.dataProvider)}if(t=="series"){this.element.commonChartReload("commonChartReloadSeries",this.options.series)}if(t=="labelField"){this.element.commonChartReload("commonChartReloadCategoryField",this.options.labelField)}if(t=="field"){this.element.commonChartReload("commonChartReloadField",this.options.field)}if(t=="displayName"){this.element.commonChartReload("commonChartReloadDisplayName",this.options.displayName)}this.element.commonChartKeyReload("commonChartReloadOptionAttribute",t,i)},_create:function(){if(this.options.charts!=null){var e=[];for(var t in this.options.charts){this.options.charts[t].sid=t;e.push(this.options.charts[t])}this.options.charts=e}this._labelEnumTidy();this.element.loadJsCommonChart(this.options)},_labelEnumTidy:function(){var t=this;if(this.options.labelEnum){this.options.dataProvider=e.parseJSON(JSON.stringify(this.options.dataProvider));e(this.options.dataProvider).each(function(){this[t.options.labelField]=typicalEnumFormatter.call({enumXml:t.options.labelEnum},this[t.options.labelField])})}},showImage:function(e,t,i){this.element.showJsCommonChartImage(ctxPath,e,t,i)}})})(jQuery);(function(e,t){e.widget("ui.searchbox",{options:{url:null,callback:jQuery.noop},_searchinput:null,_searchbutton:null,_searchcondiul:null,_create:function(){var t=this;this._searchinput=e('<input style="width: 300px; height: 21px; ">').appendTo(this.element);this._searchbutton=e('<input type="button" class="sconbtn" value="搜索" style="margin-left:10px;"/>').appendTo(this.element);this._searchcondiul=e('<ul class="searchcondiul"></ul>').appendTo(this.element);this.element.css("height",55);this._searchbutton.click(function(){e.post(t.options.url,"keyword="+encodeURIComponent(encodeURIComponent(t._searchinput.val())),function(i){t.options.callback(i.resultData);if(t._searchinput.val()){t._searchcondiul.empty();var a=[];e(i.colinfos).each(function(){var n=this;var o=false;e(i.resultData).each(function(){for(var e in this){var i=this[e]===null?null:this[e]+"";if(this[e]!=null&&e.toLowerCase()==n.colname.toLowerCase()){if(n.enums){for(var a=0;a<n.enums.length;a++){if(n.enums[a].value==i&&n.enums[a].label.indexOf(t._searchinput.val())!=-1){o=true}}}else if(i.indexOf(t._searchinput.val())!=-1){o=true}return false}}});if(o){a.push(this)}});e(a).each(function(){e('<li class="ui-state-default" style="display:none" colname="'+this.colname+'">'+this.coltitle+"</li>").appendTo(t._searchcondiul).click(function(){e(this).toggleClass("ui-state-active");var i=[];t._searchcondiul.find("li").each(function(){if(e(this).hasClass("ui-state-active"))i.push(e(this).attr("colname"))});e.post(t.options.url,"filterkeys="+i.join("&filterkeys=")+"&keyword="+encodeURIComponent(encodeURIComponent(t._searchinput.val())),function(e){t.options.callback(e.resultData)},"json")}).fadeIn()})}else{t._searchcondiul.find("li").fadeOut(function(){t._searchcondiul.empty()})}},"json")})},search:function(){this._searchbutton.click()}})})(jQuery);(function(e,t){e.widget("ui.viewNavigator",{options:{firstView:null,effect:null},_viewstacks:[],_create:function(){var t=this;if(!this.options.firstView){alert("请设置首视图")}this._viewstacks.push(e(this.options.firstView,this.element));this._viewstacks[this._viewstacks.length-1].show()},pushView:function(t){var i=this;this._viewstacks[this._viewstacks.length-1].hide(this.options.effect,{direction:"left"});i._viewstacks.push(e(t,i.element));i._viewstacks[i._viewstacks.length-1].show(i.options.effect,{direction:"right"});BrowserHistory.setBrowserURL("viewid="+i._viewstacks.length)},popView:function(e){var t=this;if(e&&location.href.indexOf("#viewid=")!=-1){var i=/#viewid=[\d]*/g.exec(location.href)+"";var a=i.split("=")[1];if(a==t._viewstacks.length)return}if(this._viewstacks.length==1)return;var t=this;this._viewstacks[this._viewstacks.length-1].hide(this.options.effect,{direction:"right"});if(t._viewstacks.length){t._viewstacks.pop();t._viewstacks[t._viewstacks.length-1].show(t.options.effect,{direction:"left"})}BrowserHistory.setBrowserURL("viewid="+t._viewstacks.length)},popToFirstView:function(){var e=this;this._viewstacks[this._viewstacks.length-1].hide(this.options.effect,{direction:"right"});e._viewstacks.length=1;e._viewstacks[e._viewstacks.length-1].show(e.options.effect,{direction:"left"})},replaceView:function(t){var i=this;this._viewstacks[this._viewstacks.length-1].hide(this.options.effect);i._viewstacks.pop();i._viewstacks.push(e(t,i.element));i._viewstacks[i._viewstacks.length-1].show(i.options.effect)}})})(jQuery);(function(e,t){e.widget("ui.report",{options:{tmpl_sid:null,data_sid:null,data_sids:null,readonly:false,webmode:true,labelFunction:e.noop},_jqhtmltb:null,_create:function(){var t=this;var i=this.options.readonly?"readonly":"";e.get(ctxPath+"/report/getreporthtmltable.vot?sid="+this.options.tmpl_sid+"&webmode="+this.options.webmode,function(a){t.element.html(a);t._jqhtmltb=t.element.find("table");t._jqhtmltb.find("td").each(function(){var a=e(this);var n=a.attr("edittype");if(n==null)return;if(n=="text"||n=="num"){a.empty();if(i){e("<textarea edittype="+n+" "+i+" name='"+a.attr("dbcol")+"' class='reptextarea readoly heightadapt'></textarea>").appendTo(a)}else{e("<textarea edittype="+n+" "+i+" name='"+a.attr("dbcol")+"' class='reptextarea heightadapt'></textarea>").appendTo(a)}return}if(n=="date"){a.empty();var o=e("<input edittype="+n+" readonly name='"+a.attr("dbcol")+"' class='date'/>").width(67).appendTo(a);if(!t.options.readonly)o.datepicker({changeYear:true,changeMonth:true,yearRange:"c-50:c+50"});return}if(n=="dict"){a.empty();var s=e.parseJSON(decodeURIComponent(a.attr("dict")));var r=e("<select "+(t.options.readonly?"disabled":"")+" name='"+a.attr("dbcol")+"'></select>");for(var l=0;l<s.dictitems.length;l++){var d=s.dictitems[l].title;e("<option></option>").val(d).text(d).appendTo(r)}r.appendTo(a);return}if(n=="file"){a.empty();a.fileupload({readonly:t.options.readonly,picturePreview:true});a.append("<input type='hidden' name='"+a.attr("dbcol")+"' />");return}if(n){a.empty();a.append("<span dbcolname='"+a.attr("dbcol")+"'></span>");a.append("<input type='hidden' name='"+a.attr("dbcol")+"' />");return}});t._initData();t._resetTextAreaHeight()})},_initData:function(){var t=this;if(!this.options.data_sid&&!this.options.data_sids){e("[dbcolname]",this._jqhtmltb).each(function(){var i=e(this);i.html(t.options.labelFunction(i.parent().attr("edittype"),i.next().val()));i.next().val(i.html())});return}var i="";if(this.options.data_sid){i="sid="+this.options.data_sid}else{i="sids="+JSON.stringify(this.options.data_sids)}e.getJSON(ctxPath+"/report/getreportdata.vot?"+i+"&tmpl_sid="+this.options.tmpl_sid,function(i){for(var a in i){if(t.options.readonly){var n=e("[dbcol="+a+"]",this._jqhtmltb);if(n.attr("edittype")=="date"){n.text(i[a]?i[a].substring(0,10):"")}else if(n.attr("edittype")=="text"||n.attr("edittype")=="num"){n.empty();e("<div style='font-weight:normal;padding:0;'></div>").html(e.tidyTextToHtml(e.trim(i[a]))).appendTo(n)}else if(n.attr("edittype")=="dict"){n.text(i[a])}else if(n.attr("edittype")=="file"){n.fileupload("option","filegroupsid",i[a]).fileupload("appendUpdatedFiles",function(){t._resetTextAreaHeight()})}else{n.empty();e("<div style='font-weight:normal;padding:0;'><pre style='margin:0;padding:0'></pre></div>").find("pre").text(e.trim(i[a])).end().appendTo(n)}}else{var o=e("[name="+a+"]",this._jqhtmltb).val(i[a]);if(o.hasClass("date")){o.val(i[a]?i[a].substring(0,10):"")}else if(o.attr("type")=="hidden"&&o.parent().attr("edittype")!="file"){o.val(i[a]);o.prev().text(i[a])}else{o.val(i[a])}if(e("[name="+a+"]",this._jqhtmltb).parent().attr("edittype")=="file"){e("[name="+a+"]",this._jqhtmltb).parent().fileupload("option","filegroupsid",i[a]).fileupload("appendUpdatedFiles",function(){t._resetTextAreaHeight()})}}}e("[dbcolname]",this._jqhtmltb).each(function(){var i=e(this);i.html(t.options.labelFunction(i.parent().attr("edittype"),i.next().val()));i.next().val(i.html())});t._resetTextAreaHeight()})},_resetTextAreaHeight:function(){e("textarea",this._jqhtmltb).each(function(){if(e(this).attr("resetedheight"))return;if(e(this).parent().height()==0)e(this).height(e(this).parent().parent().height()-4);else e(this).height(e(this).parent().height()-4);e(this).attr("resetedheight",true)});e("textarea",this._jqhtmltb).initWidgets()},save:function(t){var i=this;var a=false;this._jqhtmltb.find(":input").each(function(){var t=e(this);var i=t.attr("edittype");if(i=="num"){if(isNaN(t.val())){a=true;t.addClass("ui-state-error");t.attr("title","请输入数字！")}else{t.removeClass("ui-state-error")}}});if(a)return;var n=0;i._jqhtmltb.find("[edittype=file]").each(function(){var a=e(this).find("input").val();if(!a){a=e.Guid.New();e(this).find("input").val(a)}if(e(this).fileupload("hasFileToUpload"))n++;e(this).fileupload("option","filegroupsid",a).fileupload("upload",function(){n--;if(n==0){if(!i._jqhtmltb.parent().is("form")){i._jqhtmltb.wrap("<form/>")}e.post(ctxPath+"/report/savereportdata.vot?tmpl_sid="+i.options.tmpl_sid+"&data_sid="+(i.options.data_sid||""),encodeURI(i._jqhtmltb.parent().serialize()),function(e){i.options.data_sid=e;t(i.options.data_sid)})}})});if(n==0){if(!this._jqhtmltb.parent().is("form")){this._jqhtmltb.wrap("<form/>")}e.post(ctxPath+"/report/savereportdata.vot?tmpl_sid="+i.options.tmpl_sid+"&data_sid="+(i.options.data_sid||""),encodeURI(i._jqhtmltb.parent().serialize()),function(e){i.options.data_sid=e;t(i.options.data_sid)})}},serializeReportData:function(){},destroy:function(){this.element.empty();e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(e,t){e.widget("ui.floatreport",{options:{tmpl_sid:null,groupsid:null,groupsids:[],datasids:null,ismodify:true,initgroupsid:null,readonly:false,rowheight:100,rowappendable:true,labelFunction:e.noop,uploadDataBtn:null,button:null},_reportdata:null,_reporttable:null,_coldata:[],_create:function(){var t=this;e.getJSON(ctxPath+"/floatreport/gettmplinfowithdict.vot?sid="+this.options.tmpl_sid,function(i){t._coldata=i;t._reporttable=e('<table class="floatreptable floatdatagrid" style="table-layout: fixed;">											<tr id="reportheadertr"></tr>										</table>');if(t.options.button){t._reporttable.find("#reportheadertr").append(e("<th style='white-space:nowrap;width:100px;'>操作</th>"))}e(i).each(function(){t._reporttable.find("#reportheadertr").append(e("<th style='width:"+this.colwidth+"px'>"+this.coltitle+"</th>"))});if(t.options.ismodify){if(t.options.datasids){e.getJSON(ctxPath+"/floatreport/getreportdata.vot?datasids="+JSON.stringify(t.options.datasids)+"&tmplsid="+t.options.tmpl_sid,function(e){t._reportdata=e;t._appenddata(e)})}else if(t.options.groupsid){e.getJSON(ctxPath+"/floatreport/getreportdata.vot?groupsid="+t.options.groupsid+"&tmplsid="+t.options.tmpl_sid,function(e){t._reportdata=e;t._appenddata(e)})}else{e.getJSON(ctxPath+"/floatreport/getreportdata.vot?groupsids="+JSON.stringify(t.options.groupsids)+"&tmplsid="+t.options.tmpl_sid,function(e){t._reportdata=e;t._appenddata(e)})}}else{if(t.options.initgroupsid){e.getJSON(ctxPath+"/floatreport/getreportdata.vot?groupsid="+t.options.initgroupsid+"&tmplsid="+t.options.tmpl_sid,function(e){t._reportdata=e;t._appenddata(e,true)})}}var a=t.options.groupsid||t.options.initgroupsid;t.element.append(t._reporttable);if(t.options.uploadDataBtn){t.options.uploadDataBtn.loadFileUpDownloader({wmode:"transparent",htmlText:"<font color='#005590' face='宋体'><u>上传数据excel</u></font>",single:true,extension:"*.xls"},function(){this.selectFile(function(i){if(t.options.groupsid==null){t.options.groupsid=e.getNewsid()}return ctxPath+"/floatreport/uploaddataexcel.vot?groupsid="+t.options.groupsid+"&tmplsid="+t.options.tmpl_sid}).uploadComplete(function(i){e.getJSON(ctxPath+"/floatreport/getreportdata.vot?groupsid="+t.options.groupsid+"&tmplsid="+t.options.tmpl_sid,function(e){t._reporttable.find("tr:gt(0)").remove();t._reportdata=e;t._appenddata(e)})}).uploadFail(function(e){alert("数据excel上传失败！请确保数据文件与报表模板表头一致！")})})}})},_appenddata:function(t,i){var a=this;var n="";e(t).each(function(t){var o=this;n+="<tr style='height:"+a.options.rowheight+"px;'>";if(a.options.button){n+="<td><input type='button' class='smallbutton' value='"+a.options.button.value+"' rowindx='"+t+"'/></td>"}e(a._coldata).each(function(){n+="<td>"+a._createTableCell(this,o[this.colname])+"</td>"});if(i){n+="<td style='display:none'>"+e("<input type='hidden' name='initsid'/>").val(o.sid)[0].outerHTML+"</td>"}else{n+="<td style='display:none'>"+e("<input type='hidden' name='initsid'/>").val(o.initsid)[0].outerHTML+"</td>"}n+="</tr>"});a._reporttable.append(n);if(a.options.button){e(".smallbutton",a._reporttable).click(function(){var t=a._reportdata[e(this).attr("rowindx")];a.options.button.click.call(t,a.options.tmpl_sid,t.sid)})}e("textarea",a._reporttable).initWidgets()},_createTableCell:function(t,i){if(this.options.readonly){return e.tidyTextToHtml(i)}var a=i;if(t.edittype=="dict"){a="<select name='"+t.colname+"' >";e(t.dictitems).each(function(){if(i==this.title)a+="<option selected value='"+this.title+"'>"+this.title+"</option>";else a+="<option value='"+this.title+"'>"+this.title+"</option>"});a+="<select>"}else if(t.edittype=="text"){a=e("<textarea name='"+t.colname+"' class='reptextarea heightadapt'></textarea>").height(this.options.rowheight-4).text(i)[0].outerHTML}else{a+=e("<input type='hidden' name='"+t.colname+"'/>").val(a)[0].outerHTML}return a},save:function(t){if(this.options.readonly){alert("只读形式的浮动表不允许执行保存操作，请确认！");return}var i=this;if(this.options.groupsid==null){alert("请设置groupsid后再进行保存！");return}if(!this._reporttable.parent().is("form")){this._reporttable.wrap("<form/>")}e.post(ctxPath+"/floatreport/saveReportData.vot?tmplsid="+this.options.tmpl_sid+"&groupsid="+this.options.groupsid,encodeURI(i._reporttable.parent().serialize()),function(e){t(i.options.groupsid)})},uploadData:function(){},destroy:function(){this.element.empty();e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);$.extend({selectFloatReportTemplate:function(e){var t={callback:null,groupsid:"",plugins:[],showedit:false,title:"报表模板选择"};var i=jQuery.extend(true,{},t,e);var a=$("<div></div>");o(a,i.groupsid);var n={"确定":function(){if($.isFunction(i.callback)){if(a.datagrid("option","selectedItem")==null){alert("请选择一个模板！");return}i.callback(a.datagrid("option","selectedItem"))}a.dialog("destroy")},"取消":function(){a.dialog("destroy")}};if(i.showedit){n["编辑模板"]=function(){var e=$.dialogTopIframe({url:ctxPath+"/components/floatLineReportTemplates.jsp?options="+encodeURIComponent(encodeURIComponent(JSON.stringify(i))),buttons:{"关闭":function(){top.$(e).dialog("destroy");o(a,i.groupsid)}},width:$(top).width()-40,height:$(top).height()-40,title:"编辑模板",modal:true})}}a.dialog({buttons:n,width:900,height:500,title:i.title});function o(e,t){$.getJSON(ctxPath+"/floatreport/getreleasedtmpls.vot?groupsid="+t,function(t){e.datagrid("destroy").datagrid({dataProvider:t,selectionMode:"singleRow",columns:[{headerText:"标题",dataField:"title",width:"90%"}]})})}},selectReportTemplate:function(e){var t={callback:null,groupsid:"",plugins:[],showedit:false,excelmanager:null,title:"报表模板选择"};var i=jQuery.extend(true,{},t,e);var a=$("<div></div>");o(a,i.groupsid);var n={"确定":function(){if($.isFunction(i.callback)){if(a.datagrid("option","selectedItem")==null){alert("请选择一个模板！");return}i.callback(a.datagrid("option","selectedItem"))}a.dialog("destroy")},"取消":function(){a.dialog("destroy")}};if(i.showedit){n["编辑模板"]=function(){var e=$.dialogTopIframe({url:ctxPath+"/components/reportTemplates.jsp?options="+encodeURIComponent(encodeURIComponent(JSON.stringify(i))),buttons:{"关闭":function(){top.$(e).dialog("destroy");o(a,i.groupsid)}},width:$(top).width()-40,height:$(top).height()-40,title:"编辑模板",modal:true})}}a.dialog({buttons:n,width:900,height:500,title:i.title});function o(e,t){$.getJSON(ctxPath+"/report/getreleasedtmpls.vot?groupsid="+t,function(t){e.datagrid("destroy").datagrid({dataProvider:t,selectionMode:"singleRow",columns:[{headerText:"标题",dataField:"title",width:"90%"}]})})}}});function downloadFileFromFileUploadInner(e,t,i,a){if(t){$.getJSON(ctx+"/common/isLogon.vot",function(t){if(t){$.postIframe(e)}else{alert("请您登录网站后再下载该文件！")}})}else{if(i){window.open(ctxPath+"/components/uploaddocview.jsp?sid="+a,null,"height=1400,width=1600,status=yes,toolbar=no,menubar=no,location=no,resizable=yes")}else{$.postIframe(e)}}}(function($,undefined){$.widget("ui.fileupload",{options:{filegroupsid:null,filegroupsidinput:null,readonly:false,autosave:false,enablePermanent:true,maxfilesize:51200,maxfilecount:5,uploadComplete:jQuery.noop,showDescription:false,checklogon:false,fileChange:jQuery.noop,uploadDateVisible:false,readDocOnline:false,picturePreview:false,selectFileCallback:$.noop,extension:null,htmlText:"<font color='#005590' face='宋体'><u>"+$.i18n("antelope.ui.fileupload.addattach")+"</u></font>",_uploadtimeid:null,urlsForCustomUpload:{urlForLoadUploadedFiles:ctx+"/upload/getuploadedfileinfos.vot",urlForDelFile:ctx+"/upload/delfile.vot",urlForDownloadFile:ctx+"/upload/downloadfile.vot",urlForUploadFile:ctx+"/upload/uploadfiles.vot"}},_widgetdiv:null,_uploadbtndiv:null,_filesdiv:null,_filecount:0,_currfileinfos:[],_currtimeuploadfiles:[],_create:function(){this.options._uploadtimeid=$.getNewsid();if(!this.options.filegroupsid){if(this.options.filegroupsidinput&&this.options.filegroupsidinput.val()){this.options.filegroupsid=this.options.filegroupsidinput.val()}else{this.options.filegroupsid=$.getNewsid()}}if(this.options.filegroupsidinput){var e=$(this.options.filegroupsidinput).next("[name="+$(this.options.filegroupsidinput).attr("name")+"_fluploadtimesid]");if(e.length==0){$("<input type='hidden' name='"+$(this.options.filegroupsidinput).attr("name")+"_fluploadtimesid'/>").val(this.options._uploadtimeid).insertAfter(this.options.filegroupsidinput)}e.val(this.options._uploadtimeid);this.options.filegroupsidinput.val(this.options.filegroupsid)}var t=this;function i(e){if(e.indexOf("?")==-1)e+="?";else e+="&";return e}this.options.urlsForCustomUpload.urlForLoadUploadedFiles=i(this.options.urlsForCustomUpload.urlForLoadUploadedFiles);this.options.urlsForCustomUpload.urlForDelFile=i(this.options.urlsForCustomUpload.urlForDelFile);this.options.urlsForCustomUpload.urlForDownloadFile=i(this.options.urlsForCustomUpload.urlForDownloadFile);this.options.urlsForCustomUpload.urlForUploadFile=i(this.options.urlsForCustomUpload.urlForUploadFile);this._widgetdiv=$("<div/>");this._filesdiv=$("<div/>");this._filesdiv.appendTo(this._widgetdiv);this._widgetdiv.appendTo(this.element);this.element.addClass("fileupload");this.appendUpdatedFiles(null,true);if(this.element.attr("enabled")=="false"||this.element.attr("enabled")==false){this.options.readonly=true}if(this.options.readonly)return;this._uploadbtndiv=$("<div class='uploadfileclass'/>");this._uploadbtndiv.prependTo(this._widgetdiv);
this.reloadFileUpDownloader();$(this.element).bind("attrchange",function(e,i,a){if(i=="disabled"&&a=="true"||i=="enabled"&&(a=="false"||a==false)){t._uploadbtndiv.hide();t.options.readonly=true}else{t._uploadbtndiv.show();t.options.readonly=false}})},reloadFileUpDownloader:function(){var thisObj=this;this._uploadbtndiv.loadFileUpDownloader({wmode:"transparent",extension:this.options.extension,append:true,htmlText:this.options.htmlText},function(){var thisbtnobj=this;this.selectFile(function(filelist){if($(".sysfilea",thisObj._filesdiv).size()+filelist.length>thisObj.options.maxfilecount){alert($.i18n("antelope.ui.fileupload.allowmax.prefix")+thisObj.options.maxfilecount+$.i18n("antelope.ui.fileupload.allowmax.suffix"));return false}for(var i in filelist){if(filelist[i].size>thisObj.options.maxfilesize*1024){alert($.i18n("antelope.ui.fileupload.fileistobig"));return false}}if(thisObj.options.selectFileCallback(filelist)===false){return false}thisObj._filecount+=filelist.length;for(var i in filelist){with(filelist[i]){$("<a class='sysfilea' title='"+name+"' href='javascript:void(0)' id='"+id+"'><span class='filename'>"+name+"</span><span class='percloaded' style='font-weight:bold'>(0%)</span><span fid='"+id+"' class='ui-icon ui-icon-closethick' style='display:none'/></a>").hover(function(e){$(this).find("span[fid]").show()},function(e){$(this).find("span[fid]").hide()}).appendTo(thisObj._filesdiv).find("span[fid]").click(function(){thisbtnobj.removefiles([$(this).attr("fid")]);$(this).parent().remove();thisObj._filecount--})}}if(thisObj.options.autosave){setTimeout(function(){thisObj.upload()},500)}}).progress(function(e){$("#"+e.id+" .percloaded").html("("+Math.min(100,e.bytesLoaded/e.size*100).toFixed(0)+"%"+")")}).uploadComplete(function(e){$("#"+e.id).html($("#"+e.id).html().replace(/\([^)]*\); /,"("+e.size/1e3+"K) "));thisObj._filecount--;e.filename=e.name;thisObj.options.fileChange("addFile",e);if(!thisObj._filecount){thisObj.appendUpdatedFiles(function(){thisObj.element.validate()});thisObj._uploadbtndiv.removefiles();thisObj.options.uploadComplete()}})})},appendUpdatedFiles:function(e,t){var i=this;$.getJSON(this.options.urlsForCustomUpload.urlForLoadUploadedFiles+"filegroupsid="+this.options.filegroupsid,function(a){i._currfileinfos=[];i._filesdiv.empty();for(var n=0;n<a.length;n++){if(t){if(a[n].ispermanent){i._appendDownload(a[n]);i._currfileinfos.push(a[n])}}else{if(a[n].uploadtimeid==i.options._uploadtimeid&&a[n].willdelete=="1")continue;if(!a[n].ispermanent&&a[n].uploadtimeid!=i.options._uploadtimeid)continue;i._appendDownload(a[n]);i._currfileinfos.push(a[n])}}if($.isFunction(e)){e()}})},getFileInfos:function(){return this._currfileinfos},_setOption:function(e,t){$.Widget.prototype._setOption.apply(this,arguments);if(e=="filegroupsid"&&typeof t!="undefined"){if(this.options.autosave)this.appendUpdatedFiles()}},hasFileToUpload:function(){return this._filecount!=0},_appendDownload:function(e){var t=this;var i="";if(this.options.uploadDateVisible&&e.uploaddate){i="("+e.uploaddate+")"}if(/(pdf|gif|png|jpg|jpeg)$/.test(e.filename)&&t.options.picturePreview){var a="<a title='"+e.filename+"' class='sysfilea' filedatasid='"+e.sid+"' href='javascript:void(0)'>						<span class='filename'>"+e.filename+i+"</span><span sid="+e.sid+" class='ui-icon ui-icon-closethick' style='display:none;width:13px; height:13px;'/>";if(t.options.showDescription){if(e.filedesc){a+="<span class='filename'>&nbsp;("+(e.filedesc||"")+")</span>"}}a+="</a>";t._filesdiv.append($(a).data("fileinfo",e).click(function(e){if(!Check_AdobeReader().installed){alert("请您下载保存并安装pdf阅读器！");$.postIframe(ctxPath+"/ocx/AdbeRdr1010_zh_CN.exe");e.preventDefault()}}).hover(function(e){if(t.options.readonly)return;$(this).find("span[sid]").show()},function(e){$(this).find("span[sid]").hide()}).find("span[sid]").click(function(e){var i=this;$.post(t.options.urlsForCustomUpload.urlForDelFile+"sid="+$(i).attr("sid")+"&enablepermanent="+t.options.enablePermanent+"&uploadtimeid="+t.options._uploadtimeid,function(e){if(e)e=JSON.parse(e);t.options.fileChange("removeFile",e);for(var a=0;a<t._currfileinfos.length;++a){if(t._currfileinfos[a].sid==$(i).attr("sid")){t._currfileinfos.splice(a,1);break}}$(i).parent().remove()});e.stopPropagation()}).end().click(function(){var e=$(this);if(/(gif|png|jpg|jpeg)$/.test(e.data("fileinfo").filename)&&t.options.picturePreview){$("<div><img src='"+t.options.urlsForCustomUpload.urlForDownloadFile+"sid="+$(this).attr("filedatasid")+"'/></div>").dialog({width:$(window).width()-50,height:$(window).height()-50})}else if(t.options.readDocOnline){window.open(ctxPath+"/components/uploaddocview.jsp?sid="+$(this).attr("filedatasid"),null,"height=1400,width=1600,status=yes,toolbar=no,menubar=no,location=no,resizable=yes")}else{window.open(t.options.urlsForCustomUpload.urlForDownloadFile+"sid="+$(this).attr("filedatasid"),null,"height=400,width=600,status=yes,toolbar=no,menubar=no,location=no")}}))}else{var a="<a title='"+e.filename+"' class='sysfilea' href='javascript:void(0)' onclick='downloadFileFromFileUploadInner(\""+t.options.urlsForCustomUpload.urlForDownloadFile+"sid="+e.sid+'", '+t.options.checklogon+", "+t.options.readDocOnline+',"'+e.sid+"\")'>									<span class='filename'>"+e.filename+i+"</span>";if(t.options.showDescription){if(e.filedesc){a+="<span class='filename'>&nbsp;("+(e.filedesc||"")+")</span>"}}a+="<span sid="+e.sid+" class='ui-icon ui-icon-closethick' style='display:none;width:13px; height:13px;'/>";if(t.options.showDescription){a+="<span sid="+e.sid+" class='ui-icon ui-icon-key' style='display:none;width:13px; height:13px;' title='编辑说明'/>"}a+="</a>";t._filesdiv.append($(a).hover(function(e){if(t.options.readonly)return;$(this).find("span[sid]").show()},function(e){$(this).find("span[sid]").hide()}).find("span[sid].ui-icon-closethick").click(function(e){e.stopPropagation();var i=this;$.post(t.options.urlsForCustomUpload.urlForDelFile+"sid="+$(i).attr("sid")+"&enablepermanent="+t.options.enablePermanent+"&uploadtimeid="+t.options._uploadtimeid,function(e){if(e)e=JSON.parse(e);t.options.fileChange("removeFile",e);for(var a=0;a<t._currfileinfos.length;++a){if(t._currfileinfos[a].sid==$(i).attr("sid")){t._currfileinfos.splice(a,1);break}}$(i).parent().remove()})}).end().find("span[sid].ui-icon-key").click(function(e){e.stopPropagation();var i=this;var a="";for(var n=0;n<t._currfileinfos.length;++n){if(t._currfileinfos[n].sid==$(i).attr("sid")){a=t._currfileinfos[n].filedesc;break}}$("<form>"+"文件说明(限30字)：<input name='desc' style='width:323px; height:29px;' maxlength2='30'/>"+"</form>").find("[name=desc]").val(a||"").end().submitDialog({url:ctxPath+"/upload/saveFileDescription.vot?sid="+$(i).attr("sid"),width:390,title:"文件说明",height:140,callback:function(){t.appendUpdatedFiles()}})}).end())}},_tidyfileName:function(e){return e},upload:function(e){if(this.options.readonly)return;if($.isFunction(e))this.options.uploadComplete=e;this._uploadbtndiv.upload(this.options.urlsForCustomUpload.urlForUploadFile+"uploadtimeid="+this.options._uploadtimeid+"&filegroupsid="+this.options.filegroupsid+"&enablePermanent="+this.options.enablePermanent)},destroy:function(){this.element.empty();$.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(e,t){e.widget("ui.searchresults",{options:{dataProvider:null,titleField:"title",digestField:"digest",sourceField:"source",timeField:"time",linkCallback:e.noop,keywords:null},_create:function(){if(!e.isArray(this.options.dataProvider))return;var t=this;var i='<ul class="searchresults">';e(this.options.dataProvider).each(function(a){i+='<li><div class="stitlediv"><a rownum="'+a+'" href="javascript:void(0)" class="stitlediv">';var n=null;if(e.isArray(t.options.keywords)){n=new RegExp("("+t.options.keywords.join("|")+")","ig")}else{n=new RegExp("("+t.options.keywords+")","ig")}var o=this[t.options.titleField];if(o.length>30)o=o.substring(0,30)+"...";i+=o.replace(n,'<span class="titlekeyword">$1</span>');i+='</a></div><div class="digestdiv">';var s=this[t.options.digestField];if(s!=null&&s.length>80){s=s.substring(0,80)+"...";i+=s.replace(n,'<span class="titlekeyword">$1</span>')}i+='</div><div class="sourcediv">';i+=this[t.options.sourceField]+" ";i+=this[t.options.timeField];i+="</div></li>"});i+="</ul>";this.element.append(i);e(".stitlediv",this.element).click(function(){if(e(this).attr("rownum")!=null)t.options.linkCallback.call(t.options.dataProvider[e(this).attr("rownum")])})},destroy:function(){this.element.empty();e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(e,t){e.widget("ui.audithistory",{options:{proc_inst_id_:null},_create:function(){this.element.datagrid({dataProvider:ctxPath+"/common/workflow/WorkflowCommonController/getWorkflowAuditHistory.vot?proc_inst_id_="+this.options.proc_inst_id_,columns:{unitname:{headerText:e.i18n("antelope.assigneeunit"),width:"12%"},assigneename:{headerText:e.i18n("antelope.assigneename"),width:"8%"},result:{headerText:e.i18n("antelope.auditresult"),width:"10%",labelFunction:function(e){return e.result==null?"":e.result}},taskname:{headerText:e.i18n("antelope.auditphase"),width:"15%"},comment_:{headerText:e.i18n("antelope.auditcomment"),width:"37%"},createtime:{headerText:e.i18n("antelope.audittime"),width:"18%"}},showSeqNum:true,numPerPage:20})},destroy:function(){this.element.empty();e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);function typicalNumberFormatter(e){return $.valueFormat(e)}function typicalIntFormatter(e){return $.valueFormat(e,0)}function typicalPercentageFormatter(e){if(e==null||e=="")return"";return $.valueFormat(parseFloat(e)*100)+"%"}function typicalDateFormatter(e){if(!e||e.length<10)return e;return e.substring(0,10)}function typicalTimeFormatter(e){if(!e||e.length<19)return e;return e.substring(0,19)}function typicalLinkFormatter(e){e="<div class='sssss' >"+e+"</div>";return e}function revalidateformcell(e,t){var i=$(e);var a={isnoerror:true,errorscrope:""};var n=null;if(i.is(":hidden")&&!i.is(".tinymce")){var o=i;do{var s=null;try{s=o.css("display")}catch(r){}if(s=="none"&&!o.hasClass("ui-tabs-hide")){return a}if(s=="none"&&o.hasClass("ui-tabs-hide")){n=o}o=o.parent()}while(o.size())}for(var l=0;l<$.validators.length;l++){if(t&&($.validators[l].name=="required"||$.validators[l].name=="required2"))continue;var d=i.prop($.validators[l].name)||i.attr($.validators[l].name);if(d){var u=$.validators[l].validate(i);if(u){i.attr("title",u);if(window["componentsv2"]){i.attr("data-toggle","tooltip");i.attr("data-placement","bottom");i.addClass("ui-state-error");i.tooltip("show")}else{i.addClass("ui-state-error")}a.isnoerror=false;var c=i.attr("label");if(!c)c=i.parent().find(".cd_name").html();if(!c)c=i.parent().parent().find(".cd_name").html();if(!c)c=i.parent().prev().text();if(c!=null){c=c.replace(/:|：/gi,"")}a.fieldlabel=c;a.retval=u;break}}}if(a.isnoerror){if(window["componentsv2"]){i.tooltip("destroy")}i.removeClass("ui-state-error").attr("title","")}else{if(n!=null){a.errorscrope="页签:"+$("[href=#"+n.attr("id")+"]").text()}}return a}var globalenummaps={};function typicalEnumFormatter(e,t){if(t){if(globalenummaps[t]){return globalenummaps[t][e]}var i={};$.ajax({url:ctxPath+"/getsystemenumdatas.vot?xmlname="+t,async:false,dataType:"json",success:function(e){$(e).each(function(){i[this.value]=this.label});globalenummaps[t]=i}});return i[e]}else{var a=this;e=$.trim(e);if(!this.enumXmlContent){$.ajax({url:ctxPath+"/getsystemenumdatas.vot?xmlname="+a.enumXml,async:false,dataType:"json",success:function(e){var t={};$(e).each(function(){t[this.value]=this.label});a.enumXmlContent=t}})}return this.enumXmlContent[e]==null?"":this.enumXmlContent[e]}}function typicalAjaxFormatter(e){var t=this;if(!this.ajaxContent)this.ajaxContent={};if(this.ajaxContent[e]==null){$.ajax({url:t.url+"?key="+encodeURIComponent(encodeURIComponent(e)),async:false,success:function(i){t.ajaxContent[e]=i}})}return this.ajaxContent[e]==null?"":this.ajaxContent[e]}var currexportingstatstype="";jQuery.extend({exportStatsExcel:function(e,t){currexportingstatstype=e;if(t){if(t=="fusionchart")$("#"+e+"chart")[t]("showImage","flashImgUploadCompleteForFusionChart");else $("#"+e+"chart").flashchart("showImage","flashImgUploadComplete")}else{$("#"+e+"chart").flashchart("showImage","flashImgUploadComplete")}}});function flashImgUploadComplete(e,t){$.postIframe(ctxPath+"/common/StatsUtilController/exportStatsExcel.vot",{datagriddata:JSON.stringify($("#"+currexportingstatstype).datagrid("getDataForExport")),imgname:e,component:component,currenttype:currenttype})}function flashImgUploadCompleteForFusionChart(e){var t=/fc[\d]*\.png/g.exec(e.fileName)+"";var i=ctxPath+"/common/StatsUtilController/exportStatsExcel.vot";if(window["jspquerystring"]){i+="?"+window["jspquerystring"]}$.postIframe(i,{datagriddata:JSON.stringify($("#"+currexportingstatstype).datagrid("getDataForExport")),imgname:t,component:component,currenttype:currenttype})}function hideWidgetPartsUtilFunction_(e,t){var i=window;while(i&&i.$){i.$("body").bind("click."+t,function(){if(e)e.hide()});if(i==top){break}i=window.parent}$(window).unload(function(){var e=window;while(e&&e.$){e.$("body").unbind("click."+t);if(e==top){break}e=window.parent}})}(function(e,t){e.widget("ui.tree",{options:{expandSpeed:"",showLine:true,checkable:false,dataProvider:null,async:true,asyncUrl:null,asyncParam:["sid"],expandTreeNodeByClick:false,callback:{click:e.noop,asyncSuccess:null},click:null,dblclick:null,locatePath:null,locateField:"sid",locateUrl:null,checkable:false,contextMenu:null,checkType:{Y:"s",N:"s"}},_zTree:null,_parentnode:null,_ctxMenuUl:null,_treekey:null,_create:function(){var t=this;this._treekey=e.Guid.New();this.options.callback.asyncSuccess=function(){t._asyncSuccess(t)};if(this.options.click)this.options.callback.click=this.options.click;if(this.options.dblclick)this.options.callback.dblclick=this.options.dblclick;if(this.options.contextMenu&&!e.isEmptyObject(this.options.contextMenu)){var i="<ul class='treectxmenu'>";for(var a in this.options.contextMenu){i+="<li methodkey='"+a+'\'><a href="#">'+a+"</a></li>"}i+="</ul>";this._ctxMenuUl=e(i);for(var n=0;n<t.element.length;++n){t.element[n].oncontextmenu=function(){return false}}this.options.callback.rightClick=function(i,a,n){if(n){t.element.append(t._ctxMenuUl);t._ctxMenuUl.data("cmargs",arguments);t._ctxMenuUl.css({top:i.clientY+"px",left:i.clientX+"px",display:"block"});t._ctxMenuUl.undelegate("li","click").delegate("li","click",function(){t.options.contextMenu[e(this).attr("methodkey")].click.apply(this,t._ctxMenuUl.data("cmargs"))})}}}this._zTree=this.element.zTree(this.options,this.options.dataProvider);if(this.options.contextMenu){hideWidgetPartsUtilFunction_(t&&t._ctxMenuUl,t._treekey.substring(0,8))}if(this.options.locateUrl){e.getJSON(this.options.locateUrl,function(e){t.locate(e)})}},unwrap:function(){return this._zTree},getSelectedNode:function(){return this._zTree.getSelectedNode()},getNodes:function(){return this._zTree.getNodes()},getCheckedNodes:function(){return this._zTree.getCheckedNodes()},reAsyncChildNodes:function(e,t){return this._zTree.reAsyncChildNodes(e,t)},locate:function(e){this.options.locatePath=e;this._asyncSuccess(this)},expandNode:function(e,t,i,a){return this._zTree.expandNode(e,t,i,a)},_asyncSuccess:function(e){if(e.options.locatePath!=null){while(e.options.locatePath.length){e._parentnode=e._zTree.getNodeByParam(e.options.locateField,e.options.locatePath[0]);if(e._parentnode!=null){e._zTree.expandNode(e._parentnode,true);e._zTree.selectNode(e._parentnode);e.options.locatePath.shift()}else{var t=e._zTree.getSelectedNode();if(t&&!t.isAjaxing&&e._zTree.getSelectedNode().open){e.options.locatePath.shift()}else{e._parentnode=e._zTree.getNodeByParam(e.options.locateField,e.options.locatePath[0]);break}}}if(e.options.locatePath.length==0){if(e.options.click)e.options.click();e.options.locatePath=null}}},destroy:function(){this.element.empty();e.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(){$.widget("ui.menubar",{options:{},_create:function(){new Spry.Widget.MenuBar(this.element[0])}})})(jQuery);(function(){$.widget("ui.tilegrid",{options:{dataProvider:null,numPerPage:20,pagebuttonnum:7,selectedItems:[],pageChanging:jQuery.noop,pageChange:jQuery.noop,selectionMode:"none",tileRenderer:function(){return'<div style="border:1px solid black; width:200; height: 187px; float:left; ">'+this.name+"</div>"}},_totalPage:1,_currPage:1,_pre:1,_next:1,_count:0,_currList:null,_allList:null,_prebutton:null,_nextbutton:null,_url:null,_tilegroup:null,_create:function(){this._initDatagrid()},_initDatagrid:function(){var e=this.options.dataProvider;if(!e)return;if(typeof e==="string"){this._url=e;this._createTableBasic();return}},_createTileByAjax:function(){var e=this;this._currPage=parseInt(this._currPage);if(isNaN(this._currPage)){this._currPage=1}var t={};var i=this._url;if(this._url.indexOf("?")!=-1&&this._url.split("?").length>1){var a=this._url.split("?")[1];i=this._url.split("?")[0];var n=a.split("&");for(var o=0;o<n.length;++o){t[n[o].split("=")[0]]=decodeURIComponent(n[o].split("=")[1])}}this.options.pageChanging();$.post(i,$.extend(true,{},t,{page:this._currPage,numPerPage:this.options.numPerPage}),function(t){e._count=t.count;e._currPage=t.currPage;e._pre=t.pre;e._next=t.next;e._totalpage=t.totalPage;e._currList=t.currList;e._gotoCurrPageInner();e.options.pageChange(e._currList)},"json")},_gotoCurrPageInner:function(){var e=this;var t="";e._tilegroup.html("");for(var i=0;i<e._currList.length;++i){var a=this.options.tileRenderer.call(e._currList[i],{currPage:e._currPage});if(typeof a==="string"){t+=a}else{e._tilegroup.append(a)}}if(t){e._tilegroup.html(t)}if("singleRow"==e.options.selectionMode){e._tilegroup.children().click(function(){e.options.selectedItems=[e._currList[$.inArray(this,e._tilegroup.children())]]})}if(this.options.pagebuttonnum!=0){var n=Math.min(this.options.pagebuttonnum,this._totalpage);var o=Math.max(this._currPage-parseInt(n/2),1);var s=Math.min(this._totalpage,o+n);o=Math.max(s-n,1);var r="";for(var i=o;i<s;i++){r+=l(this,i)}if(s<this._totalpage)r+="<span>...</span>";r+=l(this,this._totalpage);if(this._numpagebutton)this._numpagebutton.remove();this._numpagebutton=$(r);this._nextbutton.before(this._numpagebutton);this._numpagebutton.click(function(){if(e._currPage==this.value)return;e._currPage=this.value;e._createTileByAjax.call(e)})}function l(e,t){if(e._currPage==t)return'<input class="num_page num_page_focus" type="button" value="'+t+'">';else return'<input class="num_page" type="button" value="'+t+'">'}},_createTableBasic:function(){var e=this;this._tilegroup=$('<div class="tilegroup" style="float:left;"></div>');this.element.append(this._tilegroup);this._pagepos=$('<span class="pagepos" style="float:none; margin:0 auto; min-width:30px; width:auto;"></span>');this._pageposouter=$('<div style="margin-top:24px; clear:left; text-align:center;"></div>');this._pageposouter.append(this._pagepos);this.element.append(this._pageposouter);this._firstbutton=$('<input class="first_page" type="button" value="'+$.i18n("antelope.firstpage")+'"/>');this._lastbutton=$('<input class="last_page" type="button" value="'+$.i18n("antelope.lastpage")+'"/>');this._prebutton=$('<input class="prev_page" type="button" value="'+$.i18n("antelope.prepage")+'"/>');this._nextbutton=$('<input class="next_page" type="button" value="'+$.i18n("antelope.nextpage")+'"/>');this._currpagefield=$('<input class="currpage" value="1">');this._gopagebutton=$('<input class="gopage" type="button" value="'+$.i18n("antelope.ok")+'">');var t=[10,20,40,100];var i="<select>";var a=$.i18n("antelope.rowperpageprefix");var n=$.i18n("antelope.rowperpagesuffix");for(var o=0;o<t.length;++o){i+='<option value="'+t[o]+'">'+a+t[o]+" "+n+"</option>"}i+="</select>";this._numcurrpagelist=$(i);this._numcurrpagelist.val(this.options.numPerPage);this._pagecountinfo=$("<span>"+$.i18n("antelope.totalpageprefix")+'<span class="thepagenum"></span>'+$.i18n("antelope.totalpagesuffix")+' <span class="thecountnum"></span>'+$.i18n("antelope.row")+"</span>");this._pagepos.append(this._prebutton);this._pagepos.append(this._numpagebutton);this._pagepos.append(this._nextbutton);this._prebutton.click(function(){if(e._currPage==e._pre)return;e._currPage=e._pre;e._createTileByAjax.call(e)});this._nextbutton.click(function(){if(e._currPage==e._next)return;e._currPage=e._next;e._createTileByAjax.call(e)});this._createTileByAjax.call(e)},_setOption:function(e,t){$.Widget.prototype._setOption.apply(this,arguments);if(e=="dataProvider"){this._url=t;this._createTileByAjax()}},destroy:function(){this.element.empty();$.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(){$.widget("ui.flashslider",{options:{dataProvider:null,width:312,height:212,textheight:20,interval_time:6},_create:function(){var e=this;$.getJSON(e.options.dataProvider,function(t){var i=[];var a=[];var n=[];for(var o=0;o<t.length;++o){i.push(t[o].path);a.push(t[o].href);n.push(t[o].name)}var s='<embed height="'+e.options.height+'" 				width="'+e.options.width+'" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" quality="high" menu="false"				flashvars="borderwidth='+e.options.width+"&amp;borderheight="+(e.options.height-e.options.textheight)+"&amp;textheight="+e.options.textheight+"&amp;interval_time="+e.options.interval_time+"&amp;pics="+i.join("|")+"&amp;links="+a.join("|")+"&amp;texts="+n.join("|")+'" wmode="opaque"				src="'+ctx+'/controls/flash/usualfocus.swf" />';e.element.append(s)})},destroy:function(){this.element.empty();$.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);(function(e,t){e.widget("ui.datagrid",{options:{dataProvider:[],columns:null,locateItemSid:null,showSeqNum:false,usingTinyPageArea:false,showBusyState:false,showNumperpage:true,sortableColumns:true,visibleHeader:true,numPerPage:10,buttons:null,pagebuttonnum:5,alwaysShowPageButton:false,selectedItems:[],selectedItem:null,centerButton:false,selectionMode:"none",rowClickEnabled:false,gridClick:e.noop,cellEditUrl:null,selectionChange:e.noop,operationHeaderText:e.i18n("antelope.operation"),operationHeaderWidth:"70px",pageChange:jQuery.noop},_originNumPerPage:10,_buttonclasses:{del:{styleName:"ui-icon ui-icon-trash",toolTip:e.i18n("antelope.delete")},query:{styleName:"ui-icon ui-icon-circle-zoomout",toolTip:e.i18n("antelope.view")},key:{styleName:"ui-icon ui-icon-key",toolTip:e.i18n("antelope.config")},light:{styleName:"ui-icon ui-icon-lightbulb",toolTip:e.i18n("antelope.explain")},release:{styleName:"ui-icon ui-icon-extlink",toolTip:e.i18n("antelope.release")},update:{styleName:"ui-icon ui-icon-pencil",toolTip:e.i18n("antelope.modify")},exp:{styleName:"ui-icon ui-icon-arrowreturnthick-1-s",toolTip:e.i18n("antelope.exp")},add:{styleName:"ui-icon ui-icon-circle-plus",toolTip:e.i18n("antelope.add")},remove:{styleName:"ui-icon ui-icon-circle-close",toolTip:e.i18n("antelope.delete")},i_handbook:{styleName:"ui-icon2 ui-icon2-handbook",toolTip:"笔记本"},i_query:{styleName:"ui-icon2 ui-icon2-query",toolTip:e.i18n("antelope.view")},i_queryfolder:{styleName:"ui-icon2 ui-icon2-queryfolder",toolTip:e.i18n("antelope.view")},i_release:{styleName:"ui-icon2 ui-icon2-release",toolTip:e.i18n("antelope.release")},i_releasebook:{styleName:"ui-icon2 ui-icon2-releasebook",toolTip:"发布作业"},i_send:{styleName:"ui-icon2 ui-icon2-send",toolTip:"发送"},i_ignore:{styleName:"ui-icon2 ui-icon2-ignore",toolTip:"忽略"},i_reply:{styleName:"ui-icon2 ui-icon2-reply",toolTip:"回复"},i_money:{styleName:"ui-icon2 ui-icon2-money",toolTip:"缴费信息"},i_chat:{styleName:"ui-icon2 ui-icon2-chat",toolTip:"进入讨论"},i_gate:{styleName:"ui-icon2 ui-icon2-gate",toolTip:"进入讨论大厅"},i_play:{styleName:"ui-icon2 ui-icon2-play",toolTip:"开始讨论"},i_input:{styleName:"ui-icon2 ui-icon2-input",toolTip:"录入成绩"},i_config:{styleName:"ui-icon2 ui-icon2-config",toolTip:"配置"},i_configclass:{styleName:"ui-icon2 ui-icon2-configclass",toolTip:"配置班级"},i_configgrid:{styleName:"ui-icon2 ui-icon2-configgrid",toolTip:"配置课程"},i_configreply:{styleName:"ui-icon2 ui-icon2-configreply",toolTip:"批改"},i_del:{styleName:"ui-icon2 ui-icon2-del",toolTip:"删除"},i_audit:{styleName:"ui-icon2 ui-icon2-audit",toolTip:"审核"},i_auditpass:{styleName:"ui-icon2 ui-icon2-auditpass",toolTip:"审批通过"},i_viewvideo:{styleName:"ui-icon2 ui-icon2-viewvideo",toolTip:"收看"},i_stopchat:{styleName:"ui-icon2 ui-icon2-stopchat",toolTip:"讨论结束"},i_submit:{styleName:"ui-icon2 ui-icon2-submit",toolTip:"提交"},i_synchronize:{styleName:"ui-icon2 ui-icon2-synchronize",toolTip:"同步作业库"},i_modify:{styleName:"ui-icon2 ui-icon2-modify",toolTip:"修改"},i_viewpaper:{styleName:"ui-icon2 ui-icon2-viewpaper",toolTip:"阅卷"},i_live:{styleName:"ui-icon2 ui-icon2-live",toolTip:"直播预览"},i_up:{styleName:"ui-icon2 ui-icon2-up",toolTip:"上移"},i_down:{styleName:"ui-icon2 ui-icon2-down",toolTip:"下移"},i_recall:{styleName:"ui-icon2 ui-icon2-recall",toolTip:"撤回"}},_headerstyles:["width"],_cellstyles:{textAlign:"text-align",paddingLeft:"padding-left",width:"width",whiteSpace:"white-space"},_totalPage:1,_currPage:1,_pre:1,_next:1,_count:0,_currList:null,_allList:null,_headerdata:null,_jqtable:null,_pagepos:null,_prebutton:null,_nextbutton:null,_firstbutton:null,_lastbutton:null,_numpagebutton:null,_currpagefield:null,_currpagespan:null,_gopagebutton:null,_pagecountinfo:null,_numcurrpagelist:null,_widgetcreated:false,_sortth:null,_isup:false,_colkey:null,_url:null,_gotopageFunc:null,_create:function(){if(this.options.selectedItem!=null||this.options.selectedItems!=null&&this.options.selectedItems.length>0){alert("注意，在创建datagrid时所传入的已选中项将不会被自动选中，请通过选项获取方式重新获取dataProvider数据后重新设置已选中项！")}this._originNumPerPage=this.options.numPerPage;this._initDatagrid()},_initDatagrid:function(){var t=this.options.dataProvider;if(!t)return;if(this.options.showBusyState)e.showBusyState();if(e.isArray(t)){if(!t.length&&this.options.columns==null){alert("未发现表头数据，传入表格控件的第一行必须为表头数据！");return}this._createTableByArray(t);if(t&&t.length){this._widgetcreated=true}return}if(typeof t==="string"){this._createTableByAjax(t);return}if(e.isFunction(t)){return}},_setOption:function(t,i){if(!e.isFunction(i)){var a=JSON.parse(JSON.stringify(i));e.Widget.prototype._setOption.apply(this,arguments);if(t=="dataProvider"){if(e.isArray(i)){this._allList=a;this.options.dataProvider=a;this._sortWhenDataProviderIsArray();this._arrgotocurrPage();if(i&&i.length){this._widgetcreated=true}}else{this._url=i;this._ajaxgotocurrPage()}}}if(t=="selectedItems"){this._gotoCurrPageWithRightGotoFunc()}},_gotoCurrPageWithRightGotoFunc:function(){if(e.isArray(this.options.dataProvider)){this._arrgotocurrPage()}else{this._ajaxgotocurrPage()}},_createTableByAjax:function(t){this._url=t;if(this.options.columns){this._setHeaderDataByColumns()}else{this._headerdata=[]}this._createTableBasic(this._ajaxgotocurrPage,e.noop)},_setHeaderDataByColumns:function(){this._headerdata=this.options.columns},_ajaxgotocurrPage:function(){if(this.options.showBusyState)e.showBusyState();var t=this;this._currPage=parseInt(this._currPage);if(isNaN(this._currPage)){this._currPage=1}this.options.selectedItem=null;this.options.selectedItems=[];var i={};var a=this._url;if(this._url.indexOf("?")!=-1&&this._url.split("?").length>1){var n=this._url.split("?")[1];a=this._url.split("?")[0];var o=n.split("&");for(var s=0;s<o.length;++s){i[o[s].split("=")[0]]=decodeURIComponent(o[s].split("=")[1])}}if(this.options.locateItemSid){i["locateItemSid"]=this.options.locateItemSid;this.options.locateItemSid=null}e.post(a,e.extend(true,{},i,{page:this._currPage,numPerPage:this.options.numPerPage,sortcol:this._sortth&&this._colkey||"",isup:this._isup}),function(e){t._count=e.count;t._currPage=e.currPage;t._pre=e.pre;t._next=e.next;t._totalpage=e.totalPage;t._currList=e.currList;t._gotoCurrPageInner(t._ajaxgotocurrPage)},"json")},_arrgotocurrPage:function(){this._count=this._allList.length;this._currPage=parseInt(this._currPage);if(isNaN(this._currPage)||this._currPage<1){this._currPage=1}this._totalpage=parseInt((this._count-1)/this.options.numPerPage)+1;if(this._totalpage==0)this._totalpage=1;if(this._currPage>this._totalpage)this._currPage=this._totalpage;this._pre=this._currPage==1?1:this._currPage-1;var e=this._currPage*this.options.numPerPage;if(e>=this._count){this._next=this._currPage;e=this._count}else{this._next=this._currPage+1}this._currList=[];for(var t=(this._currPage-1)*this.options.numPerPage;t<e;t++){this._currList.push(this._allList[t])}this._gotoCurrPageInner(this._arrgotocurrPage)},_gotoCurrPageInner:function(t){var i=this;i.options.pageChange(i._currList);this._currpagefield.val(this._currPage);if(this.options.usingTinyPageArea){this._currpagefield.val(this._currPage+"/"+this._totalpage);this._currpagespan.text(this._currPage+"/"+this._totalpage)}var a="";var n=e.Guid.New();for(var o=0;o<this._currList.length;o++){a+="<tr class='datatr'>";if(this.options.selectionMode==="singleRow"){var s=this._currList[o]==this.options.selectedItem;a+="<td><input class='row_select_input' rownum='"+o+"' name='"+n+"' type='radio' "+(s?"checked":"")+"/></td>"}if(this.options.selectionMode==="multipleRows"){var s=e.inArray(this._currList[o],this.options.selectedItems)!=-1;a+="<td><input class='row_select_input' rownum='"+o+"' type='checkbox' "+(s?"checked":"")+"/></td>"}if(this.options.showSeqNum){a+="<td style='text-align:center;'>"+(this.options.numPerPage*(this._currPage-1)+o+1)+"</td>"}if(e.isArray(this._headerdata)){e(this._headerdata).each(function(e){var t=i._currList[o][this.dataField];if(t==null)t="";a+="<td rowIndex='"+o+"' columnIndex='"+e+"' "+i._createTableCellStyle(this)+">"+i._createTableCell(o,t,this)+"</td>"})}else{var r=0;for(var l in this._headerdata){var d=this._currList[o][l];if(d==null)d="";a+="<td rowIndex='"+o+"' columnKey='"+l+"' "+i._createTableCellStyle(this._headerdata[l])+">"+i._createTableCell(o,d,this._headerdata[l],l)+"</td>";r++}}if(this.options.buttons){a+="<td>";e.each(this.options.buttons,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;if(typeof t=="string"){n.text=t}var s=true;if(e.isFunction(n.visibleFunction)){s=n.visibleFunction.call(i._currList[o],i._currList[o])}if(!s)return;var r="";if(n.toolTip){r=" title='"+n.toolTip+"' "}else{if(i._buttonclasses[n.text]){r=" title='"+i._buttonclasses[n.text].toolTip+"' "}}if(i._buttonclasses[n.text]){if(i.options.centerButton){a+="<input _rowpos='"+o+"' "+r+"  method='"+n.text+"' style='border:0; margin-left:3px;cursor:pointer;' class='"+i._buttonclasses[n.text].styleName+"' type='button'/>"}else{a+="<input _rowpos='"+o+"' "+r+"  method='"+n.text+"' style='border:0; float:left; margin-left:3px;cursor:pointer;' class='"+i._buttonclasses[n.text].styleName+"' type='button'/>"}}else{a+="<input _rowpos='"+o+"' "+r+" type='button' method='"+n.text+"' value='"+n.text+"'/>"}});a+="</td>"}a+="</tr>"}e(".datatr",this._jqtable).remove();this._jqtable.append(a);this._resetSelectedClass();this._jqtable.find(":button").click(function(){var t=e(this).attr("method");var a=e(this).attr("_rowpos");if(e.isArray(i.options.buttons)){for(var n=0;n<i.options.buttons.length;n++){var o=i.options.buttons[n];if(o.text==t){o.click.call(i._currList[a],i.element);break}}}else{if(e.isFunction(i.options.buttons[t])){i.options.buttons[t].call(i._currList[a],i.element)}else{i.options.buttons[t].click.call(i._currList[a],i.element)}}});this._jqtable.find("[dataField]:checkbox").click(function(){var t=e(this);if(i._currList[t.attr("rownum")][t.attr("dataField")]===true||i._currList[t.attr("rownum")][t.attr("dataField")]===false)i._currList[t.attr("rownum")][t.attr("dataField")]=t.prop("checked");else i._currList[t.attr("rownum")][t.attr("dataField")]=t.prop("checked")?1:0});this._jqtable.find(".row_select_input:checkbox").click(function(e){u(this,i);e.stopPropagation()});this._jqtable.find("[alwaysselshow]").change(function(e){i._cellEndEdit.call(i,e)});function u(t,i){var a="";if(e(t).is(":radio")){i.options.selectedItem=i._currList[e(t).attr("rownum")];
i.options.selectedItems=[i.options.selectedItem];a="singleRow"}else{if(e(t).prop("checked")){c(i,t);a="addRow"}else{p(i,t);a="removeRow"}}i._resetSelectedClass();i._jqtable.find(".select_all_row").prop("checked",function(){return i._jqtable.find(".row_select_input:checkbox:not(:checked)").size()==0});i.options.selectionChange(a,[i._currList[e(t).attr("rownum")]])}this._jqtable.find(".select_all_row").click(function(){var t="";var a=[];if(e(this).prop("checked")){i._jqtable.find(".row_select_input:checkbox:not(:checked)").prop("checked",e(this).prop("checked")).each(function(){c(i,this);a.push(i._currList[e(this).attr("rownum")])});t="addRow"}else{i._jqtable.find(".row_select_input:checkbox:checked").prop("checked",e(this).prop("checked")).each(function(){p(i,this);a.push(i._currList[e(this).attr("rownum")])});t="removeRow"}i._resetSelectedClass();i.options.selectionChange(t,a)}).prop("checked",function(){return i._jqtable.find(".row_select_input:checkbox:not(:checked)").size()==0&&i._currList.length!=0});function c(t,i){t.options.selectedItems.push(t._currList[e(i).attr("rownum")])}function p(t,i){t.options.selectedItems=e.grep(t.options.selectedItems,function(a,n){return t._currList[e(i).attr("rownum")]!=a})}this._jqtable.find(".row_select_input:radio").click(function(e){u(this,i);e.stopPropagation()});var h=this._jqtable.find("td");h.click(function(t){var a=e(this);if(a.attr("columnIndex")){t.column=i.options.columns[a.attr("columnIndex")]}else{t.column=i._headerdata[a.attr("columnKey")]}t.item=i._currList[a.attr("rowIndex")];i.options.gridClick.call(this,t)});h.dblclick(function(t){var a=e(this);var n=i.options.columns[a.attr("columnKey")];if(n&&n["editable"]){a.empty();var o=n["itemEditor"];if(o&&n["itemEditor"].showWhen!="always"){var s=i._createEditableCell(o,a.attr("rowIndex"),a.attr("columnKey"));e(s).appendTo(this).keydown(function(e){i._cellEndEdit.call(i,e)}).focusout(function(e){i._cellEndEdit.call(i,e)}).focus().click(function(e){e.stopPropagation()}).dblclick(function(e){e.stopPropagation()})}else{e("<input/>").attr({rowIndex:a.attr("rowIndex"),columnKey:a.attr("columnKey")}).css({textAlign:a.css("textAlign"),width:"100%"}).val(i._currList[a.attr("rowIndex")][a.attr("columnKey")]).appendTo(this).focus().select().keydown(function(e){i._cellEndEdit.call(i,e)}).focusout(function(e){i._cellEndEdit.call(i,e)})}}});var f=this._jqtable.find("tr:not(.grid_thead)");f.hover(function(){e(this).toggleClass("gridtrhover")});if(this.options.rowClickEnabled&&this.options.selectionMode!="none"){f.click(function(t){var a=e(this).find(":checkbox:first,:radio:first");a.prop("checked",!a.prop("checked"));u(a[0],i)})}if(this._totalpage==1&&this._count<=this._originNumPerPage&&!this.options.alwaysShowPageButton){this._pagepos.hide()}else{this._pagepos.show()}if(this.options.pagebuttonnum!=0){var m=Math.min(this.options.pagebuttonnum,this._totalpage);var g=Math.max(this._currPage-parseInt(m/2),1);var v=Math.min(this._totalpage,g+m);g=Math.max(v-m,1);var y="";for(var o=g;o<v;o++){y+=b(this,o)}if(v<this._totalpage)y+="<span>...</span>";y+=b(this,this._totalpage);if(this._numpagebutton)this._numpagebutton.remove();this._numpagebutton=e(y);this._nextbutton.before(this._numpagebutton);this._numpagebutton.click(function(){if(i._currPage==this.value)return;i._currPage=this.value;t.call(i)})}function b(e,t){if(e._currPage==t)return'<input class="num_page num_page_focus" type="button" value="'+t+'">';else return'<input class="num_page" type="button" value="'+t+'">'}e("tr",this.element).removeClass("evenrow");e("tr:even",this.element).addClass("evenrow");this._pagecountinfo.find(".thepagenum").text(this._totalpage);this._pagecountinfo.find(".thecountnum").text(this._count);if(this.options.showBusyState)e.hideBusyState();if(i._count==0)this._jqtable.append("<tr class='datatr'><td colspan='100'>抱歉，没有查询到您所需数据，建议您修改查询条件重新查询！</td></tr>")},refresh:function(){this._gotopageFunc.call(this)},_cellEndEdit:function(t){var i=this;var a=e(t.target);if(a.data("beginedit"))return;var n=i._currList[a.attr("rowIndex")];if(t.type=="keydown"&&t.keyCode!=13)return;if(e.trim(a.val())==n[a.attr("columnKey")]){i._gotoCurrPageWithRightGotoFunc();return}a.data("beginedit",true);if(i.options.cellEditUrl){e.post(i.options.cellEditUrl,{sid:n.sid,dataField:a.attr("columnKey"),value:encodeURIComponent(a.val())},function(t){if(t){alert(t);setTimeout(function(){a.focus().select()},200)}else{i._gotoCurrPageWithRightGotoFunc();e("body").focus()}a.data("beginedit",false)})}else{n[a.attr("columnKey")]=a.val();i._gotoCurrPageWithRightGotoFunc()}},_createEditableCell:function(e,t,i,a){var n=this;if(!e["type"]||!e["optionField"]||!e["labelField"]||!e["valueField"]){alert("编辑器选项中  type optionField labelField valueField四个选项必须填写完整！");return}var o="";if(e["type"]=="select"){o="<select rowIndex='"+t+"' columnKey='"+i+"' style='width:auto;' "+(a||"")+" >";var s=n._currList[t][e["optionField"]];var r=n._currList[t][i];for(var l=0;l<s.length;++l){if(r==s[l][e["valueField"]]){o+="<option value='"+s[l][e["valueField"]]+"' selected>"+s[l][e["labelField"]]+"</option>"}else{o+="<option value='"+s[l][e["valueField"]]+"'>"+s[l][e["labelField"]]+"</option>"}}o+="</select>"}return o},_createTableCellStyle:function(t){var i="";if(e.isPlainObject(t)){for(var a in t){if(this._cellstyles[a]){i+=this._cellstyles[a]+":"+t[a]+";"}}if(i)i=" style='"+i+"' "}return i},_createTableCell:function(t,i,a,n){var o=i;var s=i;if(e.isPlainObject(i)){o=i.html;s=i.val}else{if(a&&a["type"]=="checkbox"){return'<input rownum="'+t+'" dataField="'+a.dataField+'" type="checkbox" '+(s?"checked":"")+"/>"}}if(a.itemEditor&&a.itemEditor.showWhen=="always"){var r=this._createEditableCell(a.itemEditor,t,n,"alwaysselshow='true'");return r}if(e.isPlainObject(a)){var l=a.labelFunction;if(e.isFunction(l)){o=l.call(this.options,this._currList[t],a)}else if(e.isFunction(window[l])){o=window[l].call(this.options,this._currList[t],a)}else if(e.isFunction(a.formatter)){o=a.formatter(s)}else if(a.enumXml){o=typicalEnumFormatter.call(a,s)}else if(a.enumXmlField&&this._currList[t][a.enumXmlField]){o=typicalEnumFormatter.call({enumXml:this._currList[t][a.enumXmlField]},s)}if(o==null)o=""}return o},_resetSelectedClass:function(){this._jqtable.find(".row_select_input:checked").closest("tr").addClass("gridselected");this._jqtable.find(".row_select_input:not(:checked)").closest("tr").removeClass("gridselected")},_createTableByArray:function(e){if(this.options.columns){this._setHeaderDataByColumns()}else{this._headerdata=e[0]}if(!this.options.columns){this._allList=e.splice(0,1)}this._allList=e;this._createTableBasic(this._arrgotocurrPage,this._sortWhenDataProviderIsArray)},_sortWhenDataProviderIsArray:function(){var t=this;this._allList.sort(function(i,a){var n=i[t._colkey];var o=a[t._colkey];if(e.isPlainObject(n))n=n.val;if(e.isPlainObject(o))o=o.val;if(n==null)n="";if(o==null)o="";if(typeof n==="number"){return t._isup?parseFloat(n)-parseFloat(o):parseFloat(o)-parseFloat(n)}else{return t._isup?n.localeCompare(o):o.localeCompare(n)}})},_createHeaderStyles:function(t){var i="white-space:nowrap;";for(var a in t){if(e.inArray(a,this._headerstyles)!=-1){i+=a+":"+t[a]+";"}}return i},_createTableBasic:function(t,i){var a=this;var n="<table class='datagrid'>";var o="<tr class='grid_thead'>";if(this.options.visibleHeader==false){o="<tr style='display:none'>"}if(this.options.selectionMode==="singleRow"){o+="<th class='single_rowclass' style='white-space:nowrap;width:3%;'>"+e.i18n("antelope.singleselect")+"</th>"}if(this.options.selectionMode==="multipleRows"){o+="<th style='width:3%;'><input class='select_all_row' type='checkbox'/></th>"}if(this.options.showSeqNum){o+="<th style='width:3%;white-space:nowrap;'>"+e.i18n("antelope.ordernum")+"</th>"}if(e.isArray(this._headerdata)){e(this._headerdata).each(function(){var e=a._createHeaderStyles(this);if(e)e="style='"+e+"'";var t="<span></span>";if(this.type||!a.options.sortableColumns&&(typeof this.sortable=="undefined"||this.sortable)){t=""}if(this.sortField){o+="<th sortField='"+this.sortField+"' "+e+" key='"+this.dataField+"'>"+(this.headerText||"")+t+"</th>"}else{o+="<th "+e+" key='"+this.dataField+"'>"+(this.headerText||"")+t+"</th>"}})}else{for(var s in this._headerdata){var r=this._headerdata[s];var l="white-space:nowrap;";if(e.isPlainObject(r)){r=r.headerText;l=a._createHeaderStyles(this._headerdata[s])}var d="";if(this._headerdata[s].sortField){d=" sortField='"+this._headerdata[s].sortField+"' "}if(this.options.sortableColumns&&(typeof this._headerdata[s].sortable=="undefined"||this._headerdata[s].sortable))o+="<th key='"+s+"' "+d+" style='"+l+"'>"+(r||"")+"<span></span></th>";else o+="<th key='"+s+"' "+d+"  style='"+l+"'>"+(r||"")+"</th>"}}if(this.options.buttons){o+="<th style='width:"+this.options.operationHeaderWidth+";'>"+this.options.operationHeaderText+"</th>"}o+="</tr>";n+=o;n+="</table>";this._jqtable=e(n);this.element.append(this._jqtable);if(this.options.usingTinyPageArea){this._pagepos=e('<div class="pagepos" style="display:none; float:none; width:auto; text-align:center;"></div>')}else{this._pagepos=e('<div class="pagepos" style="display:none;"></div>')}this.element.append(this._pagepos);if(this.options.usingTinyPageArea){this._firstbutton=e('<a href="javascript:void(0)">'+e.i18n("antelope.firstpage")+"</a>");this._prebutton=e('<a href="javascript:void(0)">'+e.i18n("antelope.prep")+"</a>");this._nextbutton=e('<a href="javascript:void(0)">'+e.i18n("antelope.nextp")+"</a>");this._lastbutton=e('<a href="javascript:void(0)">'+e.i18n("antelope.lastpage")+"</a>")}else{this._firstbutton=e('<input class="first_page" type="button" value="'+e.i18n("antelope.firstpage")+'"/>');this._prebutton=e('<input class="prev_page" type="button" value="'+e.i18n("antelope.prepage")+'"/>');this._nextbutton=e('<input class="next_page" type="button" value="'+e.i18n("antelope.nextpage")+'"/>');this._lastbutton=e('<input class="last_page" type="button" value="'+e.i18n("antelope.lastpage")+'"/>')}this._currpagefield=e('<input class="currpage" value="1">');this._gopagebutton=e('<input class="gopage" type="button" value="'+e.i18n("antelope.ok")+'">');var u=[10,20,40,100];var c="<select>";var p=e.i18n("antelope.rowperpageprefix");var h=e.i18n("antelope.rowperpagesuffix");for(var f=0;f<u.length;++f){c+='<option value="'+u[f]+'">'+p+u[f]+" "+h+"</option>"}c+="</select>";this._numcurrpagelist=e(c);this._numcurrpagelist.val(this.options.numPerPage);this._pagecountinfo=e("<span>"+e.i18n("antelope.totalpageprefix")+'<span class="thepagenum"></span>'+e.i18n("antelope.totalpagesuffix")+' <span class="thecountnum"></span>'+e.i18n("antelope.row")+"</span>");this._pagepos.append(this._firstbutton);this._pagepos.append(this._prebutton);this._pagepos.append(this._numpagebutton);this._pagepos.append(this._nextbutton);this._pagepos.append(this._lastbutton);this._pagepos.append(this._currpagefield);this._pagepos.append(this._gopagebutton);this._pagepos.append(this._pagecountinfo);this._pagepos.append(this._numcurrpagelist);if(this.options.usingTinyPageArea){this._currpagespan=e("<span class='currpagespan'>"+this._currpagefield.val()+"</span>");this._currpagefield.after(this._currpagespan).hide();this._gopagebutton.hide();this._pagecountinfo.hide();this._numcurrpagelist.hide()}if(!this.options.showNumperpage){this._numcurrpagelist.hide()}var a=this;a._gotopageFunc=t;this._firstbutton.click(function(){if(a._currPage==1)return;a._currPage=1;t.call(a)});this._prebutton.click(function(){if(a._currPage==a._pre)return;a._currPage=a._pre;t.call(a)});this._nextbutton.click(function(){if(a._currPage==a._next)return;a._currPage=a._next;t.call(a)});this._lastbutton.click(function(){if(a._currPage==a._totalpage)return;a._currPage=a._totalpage;t.call(a)});this._gopagebutton.click(function(){if(a._currPage==a._currpagefield.val())return;a._currPage=a._currpagefield.val();t.call(a)});this._numcurrpagelist.change(function(){a.options.numPerPage=parseInt(this.value);t.call(a)});var a=this;this._jqtable.find("th:has(span)").css("cursor","pointer").click(function(){var n=this;var o=0;e("th",a._jqtable).each(function(e){if(this==n)o=e});var s=false;if(a._sortth==n)s=!a._isup;e(this).parent().find("span").removeClass();e(this).find("span").addClass(s?"sortup":"sortdown");a._sortth=n;a._isup=s;var r=e(n).attr("sortField");if(r){a._colkey=r}else{a._colkey=e(n).attr("key")}i.call(a);t.call(a)});t.call(a)},destroy:function(){this.element.empty();e.Widget.prototype.destroy.apply(this,arguments)},getCurrList:function(){return this._currList},removeRow:function(t){if(e.isArray(this.options.dataProvider)){var i=this.options.dataProvider;for(var a=0;a<i.length;++a){if(i[a].sid==t){i.splice(a,1);break}}this._gotoCurrPageWithRightGotoFunc()}else{alert("此方法仅适用于给dataProvider直接传值,前台js分页的情况！")}},getDataForExport:function(){var t=[];var i=[];for(var a in this._headerdata){if(e.isArray(this._headerdata)){i.push({headerText:this._headerdata[a].headerText,field:this._headerdata[a].dataField})}else{if(e.isPlainObject(this._headerdata[a])){i.push({headerText:this._headerdata[a].headerText,field:a})}else{i.push({headerText:this._headerdata[a],field:a})}}}t.push(i);for(var n=0;n<this._allList.length;n++){t.push(this._allList[n])}return t}})})(jQuery);function getMessage(e){}function beginlist(e){$(e).remove();return""}jQuery.cookie=function(e,t,i){if(typeof t!="undefined"){i=i||{};if(t===null){t="";i.expires=-1}var a="";if(i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)){var n;if(typeof i.expires=="number"){n=new Date;n.setTime(n.getTime()+i.expires*24*60*60*1e3)}else{n=i.expires}a="; expires="+n.toUTCString()}var o=i.path?"; path="+i.path:"";var s=i.domain?"; domain="+i.domain:"";var r=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,o,s,r].join("")}else{var l=null;if(document.cookie&&document.cookie!=""){var d=document.cookie.split(";");for(var u=0;u<d.length;u++){var c=jQuery.trim(d[u]);if(c.substring(0,e.length+1)==e+"="){l=decodeURIComponent(c.substring(e.length+1));break}}}return l}};function creatAjaxJSON(e,t,i){var a=CreatXmlRequest();a.open("POST",e);a.setRequestHeader("If-Modified-Since","0");a.setRequestHeader("Content-Length",t.length);a.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded");a.send(t);a.onreadystatechange=function(){if(a.readyState==4&&a.status==200){i(JSON.parse(a.responseText))}}}function creatAjaxPost(e,t,i){var a=CreatXmlRequest();a.open("POST",e);a.setRequestHeader("If-Modified-Since","0");a.setRequestHeader("Content-Length",t.length);a.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded");a.send(t);a.onreadystatechange=function(){if(a.readyState==4&&a.status==200){i(a.responseText)}}}var ajaxobj=null;function CreatXmlRequest(){if(ajaxobj==null){try{ajaxobj=new XMLHttpRequest}catch(e){try{ajaxobj=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){ajaxobj=new ActiveXObject("Microsoft.XMLHTTP")}}}return ajaxobj}jQuery.valueFormat=function(e,t){e=jQuery.numberFormat(e);e=/-?[\d]*\.?[\d]*/.exec(e);if(e!=0){if(t==null){t=2}e=new Number(e).toFixed(t)}var i=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return e.toString().replace(i,"$1,")};jQuery.numberFormat=function(e){e=/-?[\d]*\.?[\d]*/.exec(e);if(e.length==0){e=0}return e[0]};$.fn.extend({disable:function(){this.css("opacity",.5).prop("disabled",true).css("cursor","default").mouseleave();return this},enable:function(e){if(typeof e!="undefined"&&e==false){this.disable()}else{this.css("opacity",1).prop("disabled",false).css("cursor","pointer").mouseleave()}return this}});$.extend({selectParentUser:function(e){var t={username:"",parentUserTextInput:"",parentUsernameHiddenInput:"",defaultParentUsername:null};var i=jQuery.extend(true,{},t,e);var a=ctxPath+"/common/UserRoleOrgController/getParentUserByUsername.vot?username="+i.username;if(i.defaultParentUsername){a=ctxPath+"/common/UserRoleOrgController/getUserByUsername.vot?username="+i.defaultParentUsername}$.getJSON(a,function(e){if(e){$(i.parentUserTextInput).val(e.name);$(i.parentUsernameHiddenInput).val(e.username)}$(i.parentUserTextInput).parent().find(".selectparentuserbtn").remove();$("<input class='smallbutton selectparentuserbtn' style='width:60px;' value='选择' type='button'/>").click(function(){$.selectUsers({callback:function(e){if(e.length){$(i.parentUserTextInput).val(e[0].name);$(i.parentUsernameHiddenInput).val(e[0].username)}},isUsername:true,issingle:true})}).insertAfter(i.parentUserTextInput)})}});$.extend({issuccess:function(e,t){if(typeof e==="string"){try{e=window["eval"]("("+e+")")}catch(i){return true}}if(!e)return true;if(e.fieldInvalidmsg&&e.fieldInvalidmsg.length>0){if(typeof t==="function"){if(t(e.fieldInvalidmsg))alert(e.fieldInvalidmsg[0].title+e.fieldInvalidmsg[0].invalidMsg)}else alert(e.fieldInvalidmsg[0].title+e.fieldInvalidmsg[0].invalidMsg);return false}return true},postIframe:function(e,t,i){var a=$("<form method='post' action='"+e+"' target='tar'></form>");if(typeof t==="function"){this.createIframe(t)}else{if(t){if(typeof t==="object"){for(var n in t){$("<input name='"+n+"' type='hidden'/>").val(t[n]).appendTo(a)}}else{t=t.split("&");for(var o=0;o<t.length;o++)$("<input name='"+t[o].split("=")[0]+"' type='hidden'/>").val(t[o].split("=")[1]).appendTo(a)}}this.createIframe(i)}a.appendTo(document.body);a.submit()},createIframe:function(e,t,i){var a=$("iframe[name=tar]");if(t){a=$("iframe[name="+i+"]",t)}if(a.length==0){if(t){a=$("<iframe style='width:100%; height:100%;' frameborder='0' name='"+i+"'></iframe>").appendTo(t)}else{a=$("<iframe style='display: none;' name='tar'></iframe>").appendTo(document.body)}}if(typeof e==="function"){a[0].callback=e;if(!$.browser.msie){function n(){a[0].removeEventListener("load",n);a[0].callback(a[0].contentWindow.document.body.innerHTML)}a[0].addEventListener("load",n)}else{a[0].onreadystatechange=function(){var e=this;if(this.readyState=="complete"){if(!this.callback.executed)this.callback(this.contentWindow.document.body.innerHTML);this.callback.executed=true}if(this.readyState=="interactive"){if(!this.callback.executed){if(this.contentWindow.document.body){this.callback(this.contentWindow.document.body.innerHTML)}else{this.callback()}}this.callback.executed=true}}}}},startWait:function(e){if($("#divwaiterimg").size()==0){$("body").prepend("<div id=divwaiterimg align='center' style='position:absolute; width:100%; height:100%; z-index: 11;'>"+"	<table style='width: 100%; height: 100%;'>"+"		<tr style='width: 100%; height: 10)%;'>"+"			<td style='width: 100%; height: 100%; text-align: center; vertical-align: middle;'><img src='"+e+"/waiter.gif'></td>"+"		</tr>"+"	</table>"+"</div>"+"<div id=divwaiterdiv style='width: 2000px;height: 2000px;position: absolute;background-color: gray; filter:alpha(opacity=10);z-index:11;'></div>")}},stopWait:function(){$("#divwaiterimg,#divwaiterdiv").remove()},noNull:function(e){if(typeof e=="undefined"||e==null)return"";else return e},tidyRichText:function(e){if(e==null)e="";e=e.replace(/(..\/)*upload\/UploadController/gi,ctxPath+"/upload/UploadController");return e},tidyTextToHtml:function(e){e=e.replace(/\n/g,"<br/>");return e},open:function(e){var t={url:null};var i=jQuery.extend(true,{},t,e);window.open(i.url)},noSessionTimeout:function(){setInterval(function(){$.get(ctxPath+"/common/SystemParamsController/noSessionTimeout.vot")},1e4)}});$.fn.extend({postIframe:function(e,t){if(this.length==0){alert("未找到表单");return}for(var i=0;i<this.length;i++){if(this[i].nodeName!="FORM"){alert("找到了不是表单的节点");continue}var a=this[i];$(a).attr({method:"post",action:e,target:"tar"})}jQuery.createIframe(t);a.submit();return this},loadIframe:function(e,t,i){this.empty();var a=$.Guid.New().replace(/-/g,"");var n=document.createElement("form");$(n).attr({method:"post",action:e,target:a});if(typeof t==="function"){$.createIframe(i,this,a)}else{if(t){if(typeof t==="object"){for(var o in t){if(!$.isFunction(t[o]))$("<input name='"+o+"' type='hidden'/>").val(t[o]).appendTo(n)}}else{t=t.split("&");for(var s=0;s<t.length;s++)$("<input name='"+t[s].split("=")[0]+"' value='"+t[s].split("=")[1]+"' type='hidden'/>").appendTo(n)}}$.createIframe(i,this,a)}$(n).appendTo(document.body);n.submit();n.removeNode(true);return this},dialogIframe:function(){this.dialog.apply(this,arguments).bind("dialogdragstart dialogresizestart",function(){var e=$(this).find(".hidden-dialog-overlay");if(!e.length){e=$('<div class="hidden-dialog-overlay" style="position:absolute;top:0;left:0;right:0;bottom:0;z-index:100000;background:white;"></div>');e.css("opacity",.1);e.appendTo(this)}else e.show()}).bind("dialogdragstop dialogresizestop",function(){$(this).find(".hidden-dialog-overlay").hide()});return this}});$.extend({dialogTopIframe:function(e){var t={url:null,modal:true,show:{effect:"drop",duration:200,direction:"up"},hide:{effect:"drop",duration:200,direction:"up"},width:top.$(top.window).width()-50,height:top.$(top.window).height()-50,close:jQuery.noop,data:null,loadComplete:$.noop};var i=jQuery.extend(true,{},t,e);var a="usedtotopiframe"+Math.round(Math.random()*1e3);if(top.$(".ifrtotopdialog:hidden").size()&&top.$(".ifrtotopdialog:hidden").parent().data("uiDialog")){top.$(".ifrtotopdialog:hidden").parent().dialog("destroy");top.$(".ifrtotopdialog:hidden").parent().data("uiDialog",null)}var n=top.$("<div style='display:none;padding:0;margin:0;border:0;overflow:hidden;'><iframe class='ifrtotopdialog' name='"+a+"' style='width:100%; height:99%;margin:0;padding:0;border:0;' frameborder='0'></iframe></div>").appendTo(top.$("body"));function o(e){var t=top.$(n).is(":visible");if(!t){top.$(n).dialog(i).bind("dialogdragstart dialogresizestart",function(){var e=$(this).find(".hidden-dialog-overlay");if(!e.length){e=top.$('<div class="hidden-dialog-overlay" style="position:absolute;top:0;left:0;right:0;bottom:0;z-order:100000;background:white;"></div>');e.css("opacity",.1);e.appendTo(this)}else e.show()}).bind("dialogdragstop dialogresizestop",function(){top.$(this).find(".hidden-dialog-overlay").hide()});if(top.$(n).find("iframe")[0].contentWindow["dialogTopIframeShowed"]){top.$(n).find("iframe")[0].contentWindow["dialogTopIframeShowed"]()}}if(!$.browser.msie){if(t){i.loadComplete(e);n.find("iframe")[0].onload=null}else{if(i.data!=null){var o=document.createElement("form");$(o).attr({method:"post",action:i.url,target:a});if(typeof i.data==="object"){i.data=$.param(i.data)}var s=i.data.split("&");for(var r=0;r<s.length;r++)$("<input name='"+s[r].split("=")[0]+"' value='"+s[r].split("=")[1]+"' type='hidden'/>").appendTo(o);$(o).appendTo(document.body);o.submit();if(o.removeNode){o.removeNode(true)}else{$(o).remove()}}}}else{i.loadComplete(e)}$.hideBusyState()}if(!$.browser.msie){function s(e,t,i){if(/http:\/\/[^\/]*/.exec(i)+""!=/http:\/\/[^\/:]*/.exec(location.href)+""){t(e.contentWindow)}else{if(e.contentWindow.$&&e.contentWindow.$("body").length){t(e.contentWindow)}else{setTimeout(function(){s(e,t)},500)}}}n.find("iframe")[0].onload=function(){s(this,o,i.url)}}else{n.find("iframe")[0].onreadystatechange=function(){if(this.readyState=="complete"){o(this.contentWindow);this.onreadystatechange=null}}}if(i.data==null){n.find("iframe")[0].src=i.url}else{var r=document.createElement("form");$(r).attr({method:"post",action:i.url,target:a});if(typeof i.data==="object"){i.data=$.param(i.data)}var l=i.data.split("&");for(var d=0;d<l.length;d++)$("<input name='"+l[d].split("=")[0]+"' value='"+l[d].split("=")[1]+"' type='hidden'/>").appendTo(r);$(r).appendTo(document.body);r.submit();if(r.removeNode){r.removeNode(true)}else{$(r).remove()}}$.showBusyState();return n},closeDialogTopIframe:function(){if(location.href.indexOf("closewindowaftersubmit")!=-1){top.close();return true}var e=top.$("iframe");if(e&&e.length){for(var t=0;t<e.length;t++){if(e[t].contentWindow.document===window.document&&top.$(e[t]).is(".ifrtotopdialog")){top.$(e[t]).parent().dialog("close");return true}}}return false},subscribeRoutedMessages:function(e){var t={dest:null,beforeAjax:jQuery.noop,afterAjax:jQuery.noop,pollingInterval:5e3};var i=jQuery.extend(true,{},t,e);if(!i.dest){alert("订阅异步信息目标ID必须设置！");return}setInterval(function(){if(i.beforeAjax()===true){$.getJSON(ctxPath+"/getRoutedMessage.vot?dest="+i.dest,function(e){if(e){i.afterAjax(e)}})}},i.pollingInterval)},showBusyState:function(e){var t={top:null};var i=jQuery.extend(true,{},t,e);$("body").prepend($("<div class='busidiv'></div>").css("opacity",.1).css("top",$("body").attr("scrollTop")));if(i.top){$("body").prepend($("<span class='busispan'></span>").css("left",$("body").width()/2-50).css("top",i.top))}else{$("body").prepend($("<span class='busispan'></span>").css("left",$("body").width()/2-50).css("top",$("body").height()/2-50+$("body").attr("scrollTop")))}return this},hideBusyState:function(){$(".busidiv,.busispan").remove();return this},selectUsers:function(e){var t={callback:jQuery.noop,selectedusers:[],isUsername:true,issingle:false,filterrole:"",filterdept:false,deptheader:false};var i=jQuery.extend(true,{},t,e);var a=[];isUsername=i.isUsername||"";if(i.selectedusers==null)selectedusers=[];var n=null;if($("#seluseriframe").length){n=$("#seluseriframe").parent()}else{n=$("<div style='width:100%;height:100%;display:none;overflow:auto;'><iframe name='seluseriframe' id='seluseriframe' frameborder=0 style='padding:0; margin:0; width:100%;height:100%;'></iframe></div>").appendTo("body")}n.dialogIframe({width:850,height:500,title:"选择用户",modal:true,buttons:{"确定":function(){a=seluseriframe.getSelectedUser();if($.isFunction(i.callback)){i.callback(a)}n.dialog("destroy")},"取消":function(){n.dialog("destroy")}}});if(i.deptheader){$("<form action='"+ctxPath+"/components/usermanagerselect.jsp?isusername="+i.isUsername+"&issingle="+i.issingle+"&deptheader="+i.deptheader+"&filterrole="+encodeURIComponent(encodeURIComponent(i.filterrole))+"&filterdept="+encodeURIComponent(encodeURIComponent(i.filterdept))+"' target='seluseriframe' method='post'><input name='users' type='hidden' value='"+encodeURIComponent(JSON.stringify(i.selectedusers))+"'/></form>").appendTo("body")[0].submit()}else{$("<form action='"+ctxPath+"/components/userselect.jsp?isusername="+i.isUsername+"&issingle="+i.issingle+"&deptheader="+i.deptheader+"&filterrole="+encodeURIComponent(encodeURIComponent(i.filterrole))+"&filterdept="+encodeURIComponent(encodeURIComponent(i.filterdept))+"' target='seluseriframe' method='post'><input name='users' type='hidden' value='"+encodeURIComponent(JSON.stringify(i.selectedusers))+"'/></form>").appendTo("body")[0].submit()}},selectUserByRolesid:function(e){var t={rolesid:null,isUsername:true,unitsid:"",selecteduser:null,includeSubunits:true,callback:jQuery.noop};var i=jQuery.extend(true,{},t,e);if(i.rolesid==null){alert("根据用户角色选择用户组件，必须提供角色id!");return}$.getJSON(ctxPath+"/common/getUserByRolesid.vot?rolesid="+i.rolesid,function(e){if($("#seluseriframebyrole").length){iframdiag=$("#seluseriframebyrole").parent()}else{iframdiag=$("<div style='width:100%;height:100%;display:none;overflow:auto;'><iframe name='seluseriframebyrole' id='seluseriframebyrole' frameborder=0 style='padding:0; margin:0; width:100%;height:100%;'></iframe></div>").appendTo("body")}$.getJSON(ctxPath+"/common/getUsersByRolesidAndUnitsid.vot?rolesid="+i.rolesid+"&unitsid="+i.unitsid,function(t){if(t.length){iframdiag.dialogIframe({width:300,height:$(window).height()-70,title:"选择"+(e?e.name:"")+"用户",modal:true,buttons:{"确定":function(){if($.isFunction(i.callback)){if(seluseriframebyrole.getSelectedUser()==null)return;i.callback(seluseriframebyrole.getSelectedUser())}iframdiag.dialog("destroy")},"取消":function(){iframdiag.dialog("destroy")}}});$("<form action='"+ctxPath+"/components/userselectbyrole.jsp?isusername="+i.isUsername+"&rolesid="+i.rolesid+"&unitsid="+encodeURIComponent(encodeURIComponent(i.unitsid))+"&includeSubunits="+i.includeSubunits+"' target='seluseriframebyrole' method='post'></form>").appendTo("body")[0].submit()}else{var a=[];if(i.selecteduser)a.push(i.selecteduser);$.selectUsers({isUsername:i.isUsername,selectedusers:a,issingle:true,callback:function(e){if(e.length)i.callback(e[0]);else i.callback(null)}})}})})},selectUnit:function(e){var t=null;if($("#selunitiframe").length){t=$("#selunitiframe").parent()}else{t=$("<div style='width:100%;height:100%;display:none;overflow:auto;'><iframe src='"+ctxPath+"/components/unitselect.jsp' name='selunitiframe' id='selunitiframe' frameborder=0 style='padding:0; margin:0; width:100%;height:100%;'></iframe></div>").appendTo("body")}t.find("iframe").attr("src",ctxPath+"/components/unitselect.jsp");t.dialogIframe({width:450,height:500,title:"选择机构",modal:true,buttons:{"确定":function(){var i=selunitiframe.getSelectedUnit();if(i==null){alert("请选择一个组织机构！");return}if($.isFunction(e)){if(e(i)===false){return}}t.dialog("destroy")},"取消":function(){t.dialog("destroy")}}})},selectUnits:function(e){var t={callback:jQuery.noop,selectedunits:[]};var i=jQuery.extend(true,{},t,e);var a=null;if($("#selunitsiframes").length){a=$("#selunitsiframes").parent()}else{a=$("<div style='width:100%;height:100%;display:none;overflow:auto;'><iframe name='selunitsiframes' id='selunitsiframes' frameborder=0 style='padding:0; margin:0; width:100%;height:100%;'></iframe></div>").appendTo("body")}a.dialogIframe({width:$(window).width()-100,height:$(window).height()-50,title:"选择机构",modal:true,buttons:{"确定":function(){var e=selunitsiframes.getSelectedUnits();if($.isFunction(i.callback)){i.callback(e)}a.dialog("destroy")},"取消":function(){a.dialog("destroy")}}});$("<form action='"+ctxPath+"/components/unitsselect.jsp' target='selunitsiframes' method='post'><input name='units' type='hidden' value='"+encodeURIComponent(JSON.stringify(i.selectedunits))+"'/></form>").appendTo("body")[0].submit()},selectRoles:function(e){var t={callback:jQuery.noop,selectedroles:[]};var i=jQuery.extend(true,{},t,e);var a=null;if($("#selrolesiframes").length){a=$("#selrolesiframes").parent()}else{a=$("<div style='width:100%;height:100%;display:none;overflow:auto;'><iframe name='selrolesiframes' id='selrolesiframes' frameborder=0 style='padding:0; margin:0; width:100%;height:100%;'></iframe></div>").appendTo("body")}a.dialogIframe({width:$(window).width()-100,height:$(window).height()-50,title:"选择机构",modal:true,buttons:{"确定":function(){var e=selrolesiframes.getSelectedRoles();if($.isFunction(i.callback)){i.callback(e)}a.dialog("destroy")},"取消":function(){a.dialog("destroy")}}});$("<form action='"+ctxPath+"/components/roleselect.jsp' target='selrolesiframes' method='post'><input name='roles' type='hidden' value='"+encodeURIComponent(JSON.stringify(i.selectedunits))+"'/></form>").appendTo("body")[0].submit()},selectByList:function(e){var t={component:"listselectdemo",selectionMode:"multipleRows",callback:$.noop,queryval:"",data:"",width:$(window).width()-100,height:$(window).height()-50,selectedItemSids:"",parentsid:""};var i=jQuery.extend(true,{},t,e);var a=null;if($("#listselectsiframes_"+i.component).length){a=$("#listselectsiframes_"+i.component).parent()}else{a=$("<div style='width:100%;height:99%;display:none;overflow:auto;'><iframe name='listselectsiframes_"+i.component+"' id='listselectsiframes_"+i.component+"' frameborder=0 style='padding:0; margin:0; width:100%;height:99%;'></iframe></div>").appendTo("body")}var n={};n[$.i18n("antelope.ok")]=function(e){var t=$("#listselectsiframes_"+i.component)[0].contentWindow.getSelectedItems();if($.isFunction(i.callback)){var n=i.callback.call(e.target,t);if(n){a.dialog("destroy");$("#listselectsiframes_"+i.component).attr("src","about:blank")}}else{a.dialog("destroy");$("#listselectsiframes_"+i.component).attr("src","about:blank")}};n[$.i18n("antelope.cancel")]=function(){a.dialog("destroy");$("#listselectsiframes_"+i.component).attr("src","about:blank")};$.getJSON(ctx+"/common/components/ListSelectController/getListSelectOptions.vot?component="+i.component,function(e){a.dialogIframe({width:i.width,height:i.height,title:$.i18n("antelope.choose")+e.title,modal:true,buttons:n});var t=encodeURIComponent(i.selectedItemSids);
$("<form action='"+ctxPath+"/components/listselect.jsp' target='listselectsiframes_"+i.component+"' method='post'>					<input name='component' type='hidden' value='"+i.component+"'/>					<input name='parentsid' type='hidden' value='"+i.parentsid+"'/>					<input name='selectionMode' type='hidden' value='"+i.selectionMode+"'/>					<input name='selectedItemSids' type='hidden' value='"+t+"'/>					<input name='formdata' type='hidden' value='"+i.data+"'/>					<input name='queryval' type='hidden' value='"+i.queryval+"'/>					</form>").appendTo("body")[0].submit()})},selectByTile:function(e){var t={component:"tileselectdemo",callback:$.noop,width:top.$(top.window).width()-50,height:top.$(top.window).height()-50};var i=jQuery.extend(true,{},t,e);$.getJSON(ctx+"/common/components/TileSelectController/getListSelectOptions.vot?component="+i.component,function(e){var t=$("<div style='display:none;overflow:auto;'/>");var a={};a[$.i18n("antelope.ok")]=function(e){var a=t.find("iframe")[0].contentWindow.getSelectedItems();if($.isFunction(i.callback)){var n=i.callback.call(e.target,a);if(n)t.dialog("destroy")}else{t.dialog("destroy")}};a[$.i18n("antelope.cancel")]=function(){t.dialog("destroy")};t=$.dialogTopIframe({url:ctx+"/components/tileselect.jsp",width:i.width,height:i.height,buttons:a,title:$.i18n("antelope.choose")+e.title,data:"component="+i.component})})},selectByTree:function(e){var t={component:"treeselectdemo",selectionMode:"multipleRows",callback:$.noop,checkable:false,queryval:"",data:"",selectedItemSids:"",parentsid:""};var i=jQuery.extend(true,{},t,e);$.getJSON(ctx+"/common/components/TreeSelectController/getTreeSelectOptions.vot?component="+i.component,function(e){var t=$("<div style='display:none;overflow:auto;'/>");var a={};a[$.i18n("antelope.ok")]=function(e){var a=t.find("iframe")[0].contentWindow.getSelectedItems();if($.isFunction(i.callback)){var n=i.callback.call(e.target,a);if(n)t.dialog("destroy")}else{t.dialog("destroy")}};a[$.i18n("antelope.cancel")]=function(){t.dialog("destroy")};t.appendTo("body").loadIframe(ctx+"/components/treeselect.jsp",i).dialogIframe({width:$(window).width()-50,height:$(window).height()-30,title:$.i18n("antelope.choose")+e.title,buttons:a,modal:true})})},selectByTreeList:function(e){var t={component:"treelistselectdemo",selectionMode:"multipleRows",callback:$.noop,queryval:"",data:"",selectedItemSids:"",parentsid:""};var i=jQuery.extend(true,{},t,e);$.getJSON(ctx+"/common/components/TreeListSelectController/getTreeSelectOptions.vot?component="+i.component,function(e){var t=$("<div style='display:none;overflow:auto;margin:0;padding:0;'/>");var a={};a[$.i18n("antelope.ok")]=function(e){var a=t.find("iframe")[0].contentWindow.getSelectedItems();if($.isFunction(i.callback)){var n=i.callback.call(e.target,a);if(n)t.dialog("destroy")}else{t.dialog("destroy")}};a[$.i18n("antelope.cancel")]=function(){t.dialog("destroy")};var n="/components/treelistselect.jsp";if(window["componentVersion"]=="v2"){n="/componentsv2/treelistselect.jsp"}t.appendTo("body").loadIframe(ctx+n,i).dialogIframe({width:$(window).width()-50,height:$(window).height()-30,title:$.i18n("antelope.choose")+e.title,buttons:a,modal:true})})},selectByTreesList:function(e){var t={component:"treeslistselectdemo",selectionMode:"multipleRows",callback:$.noop,queryval:"",data:"",selectedItemSids:"",parentsid:""};var i=jQuery.extend(true,{},t,e);$.getJSON(ctx+"/common/components/MultipleTreesListSelectController/getTreesListSelectOptions.vot?component="+i.component,function(e){var t=null;var a={};a[$.i18n("antelope.ok")]=function(e){var a=t.find("iframe")[0].contentWindow.getSelectedItems();if($.isFunction(i.callback)){var n=i.callback.call(e.target,a);if(n)t.dialog("destroy")}else{t.dialog("destroy")}};a[$.i18n("antelope.cancel")]=function(){t.dialog("destroy")};var n={};for(var o in i){if(!$.isFunction(i[o]))n[o]=i[o]}t=$.dialogTopIframe({url:ctx+"/components/multiple_treeslistselect.jsp",data:n,buttons:a,title:$.i18n("antelope.choose")+e.title,modal:true})})},selectByTrees:function(e){var t={component:"multipletreesselectdemo",selectionMode:"multipleRows",callback:$.noop,queryval:"",data:"",selectedItemSids:"",parentsid:""};var i=jQuery.extend(true,{},t,e);$.getJSON(ctx+"/common/components/MultipleTreesSelectController/getTreesListSelectOptions.vot?component="+i.component,function(e){var t=null;var a={};a[$.i18n("antelope.ok")]=function(e){var a=t.find("iframe")[0].contentWindow.getSelectedItems();if($.isFunction(i.callback)){var n=i.callback.call(e.target,a);if(n)t.dialog("destroy")}else{t.dialog("destroy")}};a[$.i18n("antelope.cancel")]=function(){t.dialog("destroy")};var n={};for(var o in i){if(!$.isFunction(i[o]))n[o]=i[o]}var s="/components/multiple_treesselect.jsp";if(window["componentVersion"]=="v2"){s="/componentsv2/multiple_treesselect.jsp"}t=$.dialogTopIframe({url:ctx+s,data:n,buttons:a,title:$.i18n("antelope.choose")+e.title,modal:true})})},selectRisks:function(e){var t={callback:jQuery.noop,selectedrisks:[],issingle:false,editable:false};var i=jQuery.extend(true,{},t,e);var a=null;if($("#selrisksiframes").length){a=$("#selrisksiframes").parent()}else{a=$("<div style='width:100%;height:100%;display:none;overflow:auto;'><iframe name='selrisksiframes' id='selrisksiframes' frameborder=0 style='padding:0; margin:0; width:100%;height:100%;'></iframe></div>").appendTo("body")}a.dialogIframe({width:$(window).width()-100,height:$(window).height()-50,title:"选择合规点",modal:true,buttons:{"确定":function(){var e=selrisksiframes.getSelectedRisks();if($.isFunction(i.callback)){if(i.issingle){if(e.length==0){alert("请选择一个合规点！");return}i.callback(e[0])}else{i.callback(e)}}a.dialog("destroy")},"取消":function(){a.dialog("destroy")}}});$("<form action='"+ctxPath+"/components/risksselect.jsp?editable="+i.editable+"&issingle="+i.issingle+"' target='selrisksiframes' method='post'><input name='risks' type='hidden' value='"+encodeURIComponent(JSON.stringify(i.selectedrisks))+"'/></form>").appendTo("body").submit()},submitDelete:function(e){var t={confirmText:$.i18n("antelope.confirmtodelete")};var i=jQuery.extend(true,{},t,e);$.commonSubmit(i)},commonSubmit:function(e){var t={url:null,callback:jQuery.noop,isAutoSave:false,data:null,confirmText:$.i18n("antelope.form.confirmoperat"),button:null,async:true};var i=jQuery.extend(true,{},t,e);if(i.isAutoSave||confirm(i.confirmText)){if(i.button){$(i.button)._setButtonCommitting(true)}var a=false;$.ajax({type:"post",url:i.url,async:i.async,data:i.data,success:function(e){$(i.button)._setButtonCommitting(false);if(e&&e.indexOf("success")==-1&&e!="null"&&e.indexOf("{")==-1){if(e.length<400){alert(e);return}else{location.href=ctxPath+"/index.jsp";return}}else{a=true}i.callback(e)}});if(!i.async)return a}},extractSids:function(e){return $.extractField(e,"sid")},extractField:function(e,t){var i=[];$(e).each(function(){i.push(this[t])});return i},getNewsid:function(){var e="";$.ajax({url:ctxPath+"/common/getanewsid.vot?randomstr="+Math.random(),async:false,success:function(t){e=t}});return e},getSysprop:function(e){var t="";$.ajax({url:ctxPath+"/common/getsysprop.vot?propname="+e+"&stopcache="+Math.random(),async:false,success:function(e){t=e}});return t},getIndexPagePos:function(){var e="";$.ajax({url:ctxPath+"/common/getIndexPagePos.vot",async:false,success:function(t){e=t}});return e},fileuploadDialog:function(e){var t={filegroupsid:null,readonly:false,autosave:false,uploadComplete:jQuery.noop,width:400,height:300,maxfilecount:5,extension:null,callback:$.noop};var i=jQuery.extend(true,{},t,e);var a=$("<div style='display:none'/>");a.appendTo("body");var n={};n[$.i18n("antelope.close")]=function(){a.dialog("destroy");i.callback(a.fileupload("getFileInfos"))};a.dialog({width:i.width,height:i.height,title:$.i18n("antelope.ui.uploaddialog.fileupload"),buttons:n}).fileupload(i)},changeLogonUserinfo:function(){var e=$.dialogTopIframe({url:ctxPath+"/components/changeuserinfo.jsp?"+Math.random(),width:440,height:250,title:"修改个人信息",buttons:{"确定":function(){e.find("iframe")[0].contentWindow.commit(e)},"取消":function(){top.$(e).dialog("destroy")}}})}});jQuery.extend({Guid:{Set:function(e){var t;if(arguments.length==1){if(this.IsValid(arguments[0])){t=arguments[0]}else{t=this.Empty()}}$(this).data("value",t);return t},Empty:function(){return"00000000-0000-0000-0000-000000000000"},IsEmpty:function(e){return e==this.Empty()||typeof e=="undefined"||e==null||e==""},IsValid:function(e){rGx=new RegExp("\\b(?:[A-F0-9]{8})(?:-[A-F0-9]{4}){3}-(?:[A-F0-9]{12})\\b");return rGx.exec(e)!=null},New:function(){if(arguments.length==1&&this.IsValid(arguments[0])){$(this).data("value",arguments[0]);value=arguments[0];return value}var e=[],t;var i=new RegExp("[2345]");for(var a=0;a<8;a++){t=((1+Math.random())*65536|0).toString(16).substring(1);if(i.exec(a.toString())!=null){if(a==3){t="6"+t.substr(1,3)}e.push("-")}e.push(t.toUpperCase())}value=e.join("");$(this).data("value",value);return value},Value:function(){if($(this).data("value")){return $(this).data("value")}var e=this.New();$(this).data("value",e);return e}}})();jQuery.fn.extend({showWordCount:function(){var e=$(this).attr("maxlength");var t=$(this).text().length;if(t>=e){$(this).parent().find("div").css({color:"red"});$(this).text($(this).text().substring(0,e));t=e}if(t<e){$(this).parent().find("div").css({color:"#4586b5"})}_left=$(this).offset().left;_top=$(this).offset().top;_width=$(this).width();_height=$(this).height();$(this).parent().find("div").html(t+"/"+e);$(this).parent().find("div").css({position:"absolute",fontSize:"9pt",color:"#4586b5",width:"60px",textAlign:"right",left:_left+_width-60,top:_top+_height-6})}});function Check_AdobeReader(){var displayString;var acrobat=new Object;acrobat.installed=false;acrobat.version="0.0";if(navigator.plugins&&navigator.plugins.length){for(x=0;x<navigator.plugins.length;x++){if(navigator.plugins[x].description.indexOf("Adobe Acrobat")!=-1){acrobat.version=parseFloat(navigator.plugins[x].description.split("Version ")[1]);if(acrobat.version.toString().length==1)acrobat.version+=".0";acrobat.installed=true;displayString="Acrobat Version: "+acrobat.version;break}else if(navigator.plugins[x].description.indexOf("Adobe PDF Plug-In")!=-1){acrobat.installed=true;acrobat.version="8+";displayString="Acrobat Version 8 or Above"}}}else if(window.ActiveXObject){for(x=2;x<10;x++){try{oAcro=eval("new ActiveXObject('PDF.PdfCtrl."+x+"');");if(oAcro){acrobat.installed=true;acrobat.version=x+".0";displayString="Acrobat Version: "+acrobat.version}}catch(e){}}try{oAcro4=new ActiveXObject("PDF.PdfCtrl.1");if(oAcro4){acrobat.installed=true;acrobat.version="4.0";displayString="Acrobat Version: "+acrobat.version}}catch(e){}try{oAcro7=new ActiveXObject("AcroPDF.PDF.1");if(oAcro7){acrobat.installed=true;acrobat.version="7.0";displayString="Acrobat Version: "+acrobat.version}}catch(e){}}return acrobat}(function(){if(typeof Spry=="undefined")window.Spry={};if(!Spry.Widget)Spry.Widget={};Spry.BrowserSniff=function(){var e=navigator.appName.toString();var t=navigator.platform.toString();var i=navigator.userAgent.toString();this.mozilla=this.ie=this.opera=this.safari=false;var a=/Opera.([0-9\.]*)/i;var n=/MSIE.([0-9\.]*)/i;var o=/gecko/i;var s=/(applewebkit|safari)\/([\d\.]*)/i;var r=false;if(r=i.match(a)){this.opera=true;this.version=parseFloat(r[1])}else if(r=i.match(n)){this.ie=true;this.version=parseFloat(r[1])}else if(r=i.match(s)){this.safari=true;this.version=parseFloat(r[2])}else if(i.match(o)){var l=/rv:\s*([0-9\.]+)/i;r=i.match(l);this.mozilla=true;this.version=parseFloat(r[1])}this.windows=this.mac=this.linux=false;this.Platform=i.match(/windows/i)?"windows":i.match(/linux/i)?"linux":i.match(/mac/i)?"mac":i.match(/unix/i)?"unix":"unknown";this[this.Platform]=true;this.v=this.version;if(this.safari&&this.mac&&this.mozilla){this.mozilla=false}};Spry.is=new Spry.BrowserSniff;Spry.Widget.MenuBar=function(e,t){this.init(e,t)};Spry.Widget.MenuBar.prototype.init=function(e,t){this.element=this.getElement(e);this.currMenu=null;this.showDelay=250;this.hideDelay=600;if(typeof document.getElementById=="undefined"||navigator.vendor=="Apple Computer, Inc."&&typeof window.XMLHttpRequest=="undefined"||Spry.is.ie&&typeof document.uniqueID=="undefined"){return}if(Spry.is.ie&&Spry.is.version<7){try{document.execCommand("BackgroundImageCache",false,true)}catch(i){}}this.upKeyCode=Spry.Widget.MenuBar.KEY_UP;this.downKeyCode=Spry.Widget.MenuBar.KEY_DOWN;this.leftKeyCode=Spry.Widget.MenuBar.KEY_LEFT;this.rightKeyCode=Spry.Widget.MenuBar.KEY_RIGHT;this.escKeyCode=Spry.Widget.MenuBar.KEY_ESC;this.hoverClass="MenuBarItemHover";this.subHoverClass="MenuBarItemSubmenuHover";this.subVisibleClass="MenuBarSubmenuVisible";this.hasSubClass="MenuBarItemSubmenu";this.activeClass="MenuBarActive";this.isieClass="MenuBarItemIE";this.verticalClass="MenuBarVertical";this.horizontalClass="MenuBarHorizontal";this.enableKeyboardNavigation=true;this.hasFocus=false;if(t){for(var a in t){if(typeof this[a]=="undefined"){var n=new Image;n.src=t[a]}}Spry.Widget.MenuBar.setOptions(this,t)}if(Spry.is.safari)this.enableKeyboardNavigation=false;if(this.element){this.currMenu=this.element;var o=this.element.getElementsByTagName("li");for(var s=0;s<o.length;s++){if(s>0&&this.enableKeyboardNavigation)o[s].getElementsByTagName("a")[0].tabIndex="-1";this.initialize(o[s],e);if(Spry.is.ie){this.addClassName(o[s],this.isieClass);o[s].style.position="static"}}if(this.enableKeyboardNavigation){var r=this;this.addEventListener(document,"keydown",function(e){r.keyDown(e)},false)}if(Spry.is.ie){if(this.hasClassName(this.element,this.verticalClass)){this.element.style.position="relative"}var l=this.element.getElementsByTagName("a");for(var s=0;s<l.length;s++){l[s].style.position="relative"}}}};Spry.Widget.MenuBar.KEY_ESC=27;Spry.Widget.MenuBar.KEY_UP=38;Spry.Widget.MenuBar.KEY_DOWN=40;Spry.Widget.MenuBar.KEY_LEFT=37;Spry.Widget.MenuBar.KEY_RIGHT=39;Spry.Widget.MenuBar.prototype.getElement=function(e){if(e&&typeof e=="string")return document.getElementById(e);return e};Spry.Widget.MenuBar.prototype.hasClassName=function(e,t){if(!e||!t||!e.className||e.className.search(new RegExp("\\b"+t+"\\b"))==-1){return false}return true};Spry.Widget.MenuBar.prototype.addClassName=function(e,t){if(!e||!t||this.hasClassName(e,t))return;e.className+=(e.className?" ":"")+t};Spry.Widget.MenuBar.prototype.removeClassName=function(e,t){if(!e||!t||!this.hasClassName(e,t))return;e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),"")};Spry.Widget.MenuBar.prototype.addEventListener=function(e,t,i,a){try{if(e.addEventListener){e.addEventListener(t,i,a)}else if(e.attachEvent){e.attachEvent("on"+t,i)}}catch(n){}};Spry.Widget.MenuBar.prototype.createIframeLayer=function(e){var t=document.createElement("iframe");t.tabIndex="-1";t.src='javascript:""';t.frameBorder="0";t.scrolling="no";e.parentNode.appendChild(t);t.style.left=e.offsetLeft+"px";t.style.top=e.offsetTop+"px";t.style.width=e.offsetWidth+"px";t.style.height=e.offsetHeight+"px"};Spry.Widget.MenuBar.prototype.removeIframeLayer=function(e){var t=(e==this.element?e:e.parentNode).getElementsByTagName("iframe");while(t.length>0){t[0].parentNode.removeChild(t[0])}};Spry.Widget.MenuBar.prototype.clearMenus=function(e){var t=e.getElementsByTagName("ul");for(var i=0;i<t.length;i++)this.hideSubmenu(t[i]);this.removeClassName(this.element,this.activeClass)};Spry.Widget.MenuBar.prototype.bubbledTextEvent=function(){return Spry.is.safari&&(event.target==event.relatedTarget.parentNode||event.eventPhase==3&&event.target.parentNode==event.relatedTarget)};Spry.Widget.MenuBar.prototype.showSubmenu=function(e){if(this.currMenu){this.clearMenus(this.currMenu);this.currMenu=null}if(e){this.addClassName(e,this.subVisibleClass);if(typeof document.all!="undefined"&&!Spry.is.opera&&navigator.vendor!="KDE"){if(!this.hasClassName(this.element,this.horizontalClass)||e.parentNode.parentNode!=this.element){e.style.top=e.parentNode.offsetTop+"px"}}if(Spry.is.ie&&Spry.is.version<7){this.createIframeLayer(e)}}this.addClassName(this.element,this.activeClass)};Spry.Widget.MenuBar.prototype.hideSubmenu=function(e){if(e){this.removeClassName(e,this.subVisibleClass);if(typeof document.all!="undefined"&&!Spry.is.opera&&navigator.vendor!="KDE"){e.style.top="";e.style.left=""}if(Spry.is.ie&&Spry.is.version<7)this.removeIframeLayer(e)}};Spry.Widget.MenuBar.prototype.initialize=function(e,t){var i,a;var n=e.getElementsByTagName("a")[0];var o=e.getElementsByTagName("ul");var s=o.length>0?o[0]:null;if(s)this.addClassName(n,this.hasSubClass);if(!Spry.is.ie){e.contains=function(e){if(e==null)return false;if(e==this)return true;else return this.contains(e.parentNode)}}var r=this;this.addEventListener(e,"mouseover",function(t){r.mouseOver(e,t)},false);this.addEventListener(e,"mouseout",function(t){if(r.enableKeyboardNavigation)r.clearSelection();r.mouseOut(e,t)},false);if(this.enableKeyboardNavigation){this.addEventListener(n,"blur",function(t){r.onBlur(e)},false);this.addEventListener(n,"focus",function(t){r.keyFocus(e,t)},false)}};Spry.Widget.MenuBar.prototype.keyFocus=function(e,t){this.lastOpen=e.getElementsByTagName("a")[0];this.addClassName(this.lastOpen,e.getElementsByTagName("ul").length>0?this.subHoverClass:this.hoverClass);this.hasFocus=true};Spry.Widget.MenuBar.prototype.onBlur=function(e){this.clearSelection(e)};Spry.Widget.MenuBar.prototype.clearSelection=function(e){if(!this.lastOpen)return;if(e){e=e.getElementsByTagName("a")[0];var t=this.lastOpen;while(t!=this.element){var i=e;while(i!=this.element){if(i==t)return;try{i=i.parentNode}catch(a){break}}t=t.parentNode}}var t=this.lastOpen;while(t!=this.element){this.hideSubmenu(t.parentNode);var n=t.getElementsByTagName("a")[0];this.removeClassName(n,this.hoverClass);this.removeClassName(n,this.subHoverClass);t=t.parentNode}this.lastOpen=false};Spry.Widget.MenuBar.prototype.keyDown=function(e){if(!this.hasFocus)return;if(!this.lastOpen){this.hasFocus=false;return}var e=e||event;var t=this.lastOpen.parentNode;var i=this.lastOpen;var a=t.getElementsByTagName("ul");var n=a.length>0?a[0]:null;var o=n?true:false;var s=[t,n,null,this.getSibling(t,"previousSibling"),this.getSibling(t,"nextSibling")];if(!s[3])s[2]=t.parentNode.parentNode.nodeName.toLowerCase()=="li"?t.parentNode.parentNode:null;var r=0;switch(e.keyCode){case this.upKeyCode:r=this.getElementForKey(s,"y",1);break;case this.downKeyCode:r=this.getElementForKey(s,"y",-1);break;case this.leftKeyCode:r=this.getElementForKey(s,"x",1);break;case this.rightKeyCode:r=this.getElementForKey(s,"x",-1);break;case this.escKeyCode:case 9:this.clearSelection();this.hasFocus=false;default:return}switch(r){case 0:return;case 1:this.mouseOver(t,e);break;case 2:this.mouseOut(s[2],e);break;case 3:case 4:this.removeClassName(i,o?this.subHoverClass:this.hoverClass);break}var i=s[r].getElementsByTagName("a")[0];if(s[r].nodeName.toLowerCase()=="ul")s[r]=s[r].getElementsByTagName("li")[0];this.addClassName(i,s[r].getElementsByTagName("ul").length>0?this.subHoverClass:this.hoverClass);this.lastOpen=i;s[r].getElementsByTagName("a")[0].focus();return Spry.Widget.MenuBar.stopPropagation(e)};Spry.Widget.MenuBar.prototype.mouseOver=function(e,t){var i=e.getElementsByTagName("a")[0];var a=e.getElementsByTagName("ul");var n=a.length>0?a[0]:null;var o=n?true:false;if(this.enableKeyboardNavigation)this.clearSelection(e);if(this.bubbledTextEvent()){return}if(e.closetime)clearTimeout(e.closetime);if(this.currMenu==e){this.currMenu=null}if(this.hasFocus)i.focus();this.addClassName(i,o?this.subHoverClass:this.hoverClass);this.lastOpen=i;if(n&&!this.hasClassName(n,this.subHoverClass)){var s=this;e.opentime=window.setTimeout(function(){s.showSubmenu(n)},this.showDelay)}};Spry.Widget.MenuBar.prototype.mouseOut=function(e,t){var i=e.getElementsByTagName("a")[0];var a=e.getElementsByTagName("ul");var n=a.length>0?a[0]:null;var o=n?true:false;if(this.bubbledTextEvent()){return}var s=typeof t.relatedTarget!="undefined"?t.relatedTarget:t.toElement;if(!e.contains(s)){if(e.opentime)clearTimeout(e.opentime);this.currMenu=e;this.removeClassName(i,o?this.subHoverClass:this.hoverClass);if(n){var r=this;e.closetime=window.setTimeout(function(){r.hideSubmenu(n)},this.hideDelay)}if(this.hasFocus)i.blur()}};Spry.Widget.MenuBar.prototype.getSibling=function(e,t){var i=e[t];while(i&&i.nodeName.toLowerCase()!="li")i=i[t];return i};Spry.Widget.MenuBar.prototype.getElementForKey=function(e,t,i){var a=0;var n=Spry.Widget.MenuBar.getPosition;var o=n(e[a]);var s=false;if(e[1]&&!this.hasClassName(e[1],this.MenuBarSubmenuVisible)){e[1].style.visibility="hidden";this.showSubmenu(e[1]);s=true}var r=this.hasClassName(this.element,this.verticalClass);var l=e[0].parentNode.parentNode.nodeName.toLowerCase()=="li"?true:false;for(var d=1;d<e.length;d++){if(t=="y"&&r&&(d==1||d==2)){continue}if(t=="x"&&!r&&!l&&(d==1||d==2)){continue}if(e[d]){var u=n(e[d]);if(i*u[t]<i*o[t]){o=u;a=d}}}if(e[1]&&s){this.hideSubmenu(e[1]);e[1].style.visibility=""}return a};Spry.Widget.MenuBar.camelize=function(e){if(e.indexOf("-")==-1){return e}var t=e.split("-");var i=true;var a="";for(var n=0;n<t.length;n++){if(t[n].length>0){if(i){a=t[n];i=false}else{var o=t[n];a+=o.charAt(0).toUpperCase()+o.substring(1)}}}return a};Spry.Widget.MenuBar.getStyleProp=function(e,t){var i;try{if(e.style)i=e.style[Spry.Widget.MenuBar.camelize(t)];if(!i)if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(e,null);i=a?a.getPropertyValue(t):null}else if(e.currentStyle){i=e.currentStyle[Spry.Widget.MenuBar.camelize(t)]}}catch(n){}return i=="auto"?null:i};Spry.Widget.MenuBar.getIntProp=function(e,t){var i=parseInt(Spry.Widget.MenuBar.getStyleProp(e,t),10);if(isNaN(i))return 0;return i};Spry.Widget.MenuBar.getPosition=function(e,t){t=t||document;if(typeof e=="string"){e=t.getElementById(e)}if(!e){return false}if(e.parentNode===null||Spry.Widget.MenuBar.getStyleProp(e,"display")=="none"){return false}var i={x:0,y:0};var a=null;var n;if(e.getBoundingClientRect){n=e.getBoundingClientRect();var o=t.documentElement.scrollTop||t.body.scrollTop;var s=t.documentElement.scrollLeft||t.body.scrollLeft;i.x=n.left+s;i.y=n.top+o}else if(t.getBoxObjectFor){n=t.getBoxObjectFor(e);i.x=n.x;i.y=n.y}else{i.x=e.offsetLeft;i.y=e.offsetTop;a=e.offsetParent;if(a!=e){while(a){i.x+=a.offsetLeft;i.y+=a.offsetTop;a=a.offsetParent}}if(Spry.is.opera||Spry.is.safari&&Spry.Widget.MenuBar.getStyleProp(e,"position")=="absolute")i.y-=t.body.offsetTop}if(e.parentNode)a=e.parentNode;else a=null;if(a.nodeName){var r=a.nodeName.toUpperCase();while(a&&r!="BODY"&&r!="HTML"){r=a.nodeName.toUpperCase();i.x-=a.scrollLeft;i.y-=a.scrollTop;if(a.parentNode)a=a.parentNode;else a=null}}return i};Spry.Widget.MenuBar.stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false};Spry.Widget.MenuBar.setOptions=function(e,t,i){if(!t)return;for(var a in t){if(i&&t[a]==undefined)continue;e[a]=t[a]}}})();jQuery(function(e){if(e.datepicker){e.datepicker.regional["zh_CN"]={closeText:"关闭",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:"年"};e.datepicker.regional["en_US"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:""};e.datepicker.regional["es"]={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],weekHeader:"Sm",dateFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:""};e.datepicker.setDefaults(e.datepicker.regional[e.i18nCache["locale"]])}e("body").initWidgets(true)});